import{r as a,b as s,j as e,ao as j,ap as A,M as z,ah as d,aq as $,u as q,L as K,I as G,C as H,o as J,T as Q,ar as U,p as V,a as O,as as W,ak as _,d as X,at as Z,P as ee}from"./app-a358be14.js";const{RangePicker:te}=$,le=({handleOk:x})=>{const[v,r]=a.useState(!1),[u,m]=a.useState(!1),[C,N]=a.useState([]),[o,i]=a.useState({roles:null,status:null,createdBy:null}),b=()=>{h(),r(!0)},h=()=>{axios.get("/api/master/role").then(l=>{N(l.data.data)})};a.useEffect(()=>{h()},[]);const S=()=>{r(!1),m(!1),i({roles:null,status:null,createdBy:null})},p=(l,c)=>{if(c==="createdBy")return i({...o,createdBy:l.value});i({...o,[c]:l})};return s("div",{children:[u?s("button",{onClick:()=>b(),className:"text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-4 py-2 text-center inline-flex items-center",children:[e(j,{}),e("span",{className:"ml-2",children:"Show Filter"})]}):s("button",{onClick:()=>b(),className:" bg-white border  text-blue-700 hover:text-blue-700/90 delay-100 ease-in-out focus:ring-4 focus:outline-none focus:ring-blue-300  font-medium rounded-lg  text-sm px-4 py-2 text-center inline-flex items-center ",children:[e(A,{}),e("span",{className:"ml-2",children:"Filter"})]}),s(z,{title:"Filter Contact",open:v,onOk:()=>{x(o),m(!0),r(!1)},cancelText:u?"Clear Filter":"Cancel",onCancel:u?()=>{r(!1),m(!1),i({roles:null,status:null,createdBy:null}),x({})}:S,okText:"Apply Filter",children:[s("div",{children:[s("div",{children:[e("label",{htmlFor:"",children:"Role"}),e(d,{mode:"multiple",allowClear:!0,className:"w-full mb-2",placeholder:"Select Role",onChange:l=>p(l,"roles"),children:C.map(l=>e(d.Option,{value:l.id,children:l.role_name},l.id))})]}),s("div",{children:[e("label",{htmlFor:"",children:"Status"}),s(d,{mode:"multiple",allowClear:!0,className:"w-full mb-2",placeholder:"Select Order Status",onChange:l=>p(l,"status"),children:[e(d.Option,{value:1,children:"Active"},1),e(d.Option,{value:0,children:"Non Active"},0),e(d.Option,{value:2,children:"Blacklist"},2)]})]})]}),s("div",{className:"mb-2",children:[e("label",{htmlFor:"",children:"Create Date"}),e(te,{className:"w-full",format:"YYYY-MM-DD",onChange:(l,c)=>p(c,"created_at")})]})]})]})},ne=()=>{const x=q(),[v,r]=a.useState(!1),[u,m]=a.useState([]),[C,N]=a.useState(0),[o,i]=a.useState(""),[b,h]=a.useState(!1),[S,p]=a.useState(1),[y,l]=a.useState({}),[c,F]=a.useState(!1),[D,M]=a.useState([]),f=(n="/api/contact",g=10,Y={page:S})=>{r(!0),O.post(n,{perpage:g,...Y}).then(R=>{const{data:k,total:T,current_page:B}=R.data.data;N(T),p(B);const I=k.map(t=>({key:t.id,name:t.name,telepon:t.telepon,email:t.email,role:t==null?void 0:t.role.role_name,created_by:t==null?void 0:t.created_by_name,created_on:W(t.created_at).format("DD-MM-YYYY"),deposit:_(t==null?void 0:t.deposit),total_debt:_(t==null?void 0:t.amount_detail.total_debt)}));M(k.map(t=>t.role.role_type)),m(I),r(!1)}).catch(()=>r(!1))};a.useEffect(()=>{f()},[]);const E=(n,g=10)=>{f(`/api/contact/?page=${n}`,g,{search:o,page:n,...y})},w=()=>{h(!0),f("/api/contact",10,{search:o})},L=n=>{l(n),f("/api/contact",10,n)},P=()=>{F(!0),O.post("/api/contact/export/").then(n=>{const{data:g}=n.data;window.open(g),F(!1)}).catch(n=>F(!1))};return s(K,{rightContent:s("div",{className:"flex justify-between items-center",children:[e(le,{handleOk:L,roleSelected:D||[]}),s("button",{className:"ml-3 text-white bg-green-800 hover:bg-green-800 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-4 py-2 text-center inline-flex items-center mr-2",onClick:()=>P(),children:[c?e(X,{}):e(Z,{}),e("span",{className:"ml-2",children:"Export"})]}),s("button",{onClick:()=>x("/contact/create"),className:"text-white bg-blueColor hover:bg-blueColor/90 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 text-center inline-flex items-center ml-2",children:[e(ee,{}),e("span",{className:"ml-2",children:"Tambah Data"})]})]}),title:"List Contact",children:[s("div",{className:"row mb-4",children:[e("div",{className:"col-md-12"}),e("div",{className:"col-md-4 col-sm-6 col-12",children:e(G,{placeholder:"Cari disini",size:"large",className:"rounded",onPressEnter:()=>w(),suffix:b?e(H,{onClick:()=>{f(),i(null),h(!1)}}):e(J,{onClick:()=>w()}),value:o,onChange:n=>i(n.target.value)})}),e("div",{className:"col-md-8",children:s("strong",{className:"float-right mt-3 text-red-400",children:["Total Data: ",C]})})]}),e(Q,{dataSource:u,columns:U,loading:v,pagination:!1,rowKey:"id",scroll:{x:"max-content"},tableLayout:"auto"}),e(V,{defaultCurrent:1,current:S,total:C,className:"mt-4 text-center",onChange:E,pageSizeOptions:["10","20","50","100","200","500"]})]})};export{ne as default};
