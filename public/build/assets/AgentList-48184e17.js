import{r as s,j as l,L as G,T as H,a as i,m,b as I}from"./app-037e9539.js";import{A as q,a as z,b as J}from"./AgentListTable-d7759c8f.js";import{F as O}from"./FolderFilled-5ab36953.js";import"./index-fd16895c.js";const W=()=>{const[y,L]=s.useState(null),[r,S]=s.useState(null),[k,u]=s.useState("Agent Management"),[n,d]=s.useState(0),[f,P]=s.useState([]),[T,b]=s.useState([]),[K,h]=s.useState([]),[x,o]=s.useState(!1),M=()=>{o(!0),i.get("/api/province-list").then(a=>{const{data:t}=a.data;o(!1),P(t)}).catch(a=>{o(!1)})},j=a=>{b([]),i.get("/api/city-list/"+a).then(t=>{const{data:c}=t.data;b(c)}).catch(t=>{o(!1)})},g=a=>{h([]),o(!0),i.get("/api/agent-list/"+a).then(t=>{const{data:c}=t.data,p=c.map((e,B)=>{var A,C,v;return{index:B,key:(A=e==null?void 0:e.agent)==null?void 0:A.id,nama:e.nama,telepon:e.telepon,alamat:e.alamat,libur:((C=e==null?void 0:e.agent)==null?void 0:C.libur)>0,active:((v=e==null?void 0:e.agent)==null?void 0:v.active)>0,order:e==null?void 0:e.order}});o(!1),h(p||[])}).catch(t=>{})};s.useEffect(()=>{M()},[]);const w=()=>{if(n==1)d(n-1),u("Agent Management");else if(n==2){d(n-1);const a=f.find(t=>t.pid==y);u(`Agent Management - ${a==null?void 0:a.nama}`)}},D=({key:a,dataIndex:t,value:c})=>{i.post("/api/agent-update",{agent_id:a,field:t,value:c}).then(p=>{m.success("Berhasil update data"),g(r)}).catch(p=>m.error("Gagal update data"))},F=[{title:"Kota/Kabupaten",dataIndex:"kota_kabupaten",key:"kota_kabupaten",render:(a,t,c)=>I("button",{onClick:()=>{n===0?(j(t.pid),L(t.pid)):n===1&&(g(t.pid),S(t.pid)),d(n+1),u(`Agent Management - ${t.nama}`)},className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 text-center inline-flex items-center",children:[l(O,{}),l("span",{className:"ml-2",children:`Detail ${n===1?"Agent":"Kota/Kabupaten"}`})]})}],_=n==0?z:J,$=n==0?f:T,E=[..._,...F],N=n>1;return l(G,{title:k,onClick:()=>w(),children:N?l(q,{dataSource:K.sort((a,t)=>a.order-t.order),handleChangeCell:D,loading:x,refetch:()=>{r&&g(r)}}):l(H,{dataSource:$,columns:E,loading:x,pagination:!1,rowKey:"index",scroll:{x:"max-content"},tableLayout:"auto"})})};export{W as default};
