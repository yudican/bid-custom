import{j as t,L as G,r as o,b as r,aY as B,aq as H,b8 as b,ag as Z,d as $,T as q,as as K,b9 as f,a as u}from"./app-72273243.js";const Q=()=>t(G,{title:"Dashboard",children:t(z,{})}),z=()=>{const[x,h]=o.useState(!1),[y,p]=o.useState(!1),[g,N]=o.useState([]),[c,v]=o.useState(null),[n,w]=o.useState(null),[l,C]=o.useState(null),[d,S]=o.useState([]),[D,L]=o.useState(0),[P,k]=o.useState([]),[E,_]=o.useState([]),F=[{title:"No",dataIndex:"name",key:"name",render:(e,a,s)=>s+1},{title:"Created Date",dataIndex:"age",key:"age",render:(e,a,s)=>K(e).format("DD-MMM-YYYY | HH:mm")},{title:"Prospect ID",dataIndex:"prospect_number",key:"prospect_number"},{title:"Contact",dataIndex:"contact_name",key:"contact_name"},{title:"Role",dataIndex:"role_name",key:"role_name"},{title:"Activity",dataIndex:"activity_total",key:"activity_total"},{title:"Prospect Tag",dataIndex:"tag_name",key:"tag_name"}],i=e=>Number(e)>=1e3?`${Number(e/1e3).toFixed(1).replace(/\.0$/,"")+"K"}`:e,T=()=>{f(null).then(e=>{const a=e.map(s=>({label:s.nama,value:s.id}));N([{label:"All Contact",value:""},...a])})},Y=async e=>f(e).then(a=>a.map(m=>({label:m.nama,value:m.id}))),I=async()=>{h(!0);try{const e=await u.get("/api/prospect/list",{params:{startDate:n,endDate:l,contact:c}}),{data:a}=e,s=a.data.data;S(s);const m=s.reduce((O,R)=>O+Number(R.activity_total),0);L(m)}catch(e){console.error("Error fetching prospect data:",e)}finally{h(!1)}},j=async()=>{try{const e=await u.get("/api/prospect/status",{params:{startDate:n,endDate:l,contact:c}}),{data:a}=e,s=a.data;k(s)}catch(e){console.error("Error fetching prospect status:",e)}},A=async()=>{try{const e=await u.get("/api/prospect/tags",{params:{startDate:n,endDate:l,contact:c}}),{data:a}=e,s=a.data;_(s)}catch(e){console.error("Error fetching prospect tags:",e)}},M=()=>{p(!0),u.post("/api/genie-order/export/").then(e=>{const{data:a}=e.data;window.open(a),p(!1)}).catch(e=>console.log("error export :",e)).finally(()=>p(!1))};return o.useEffect(()=>{T()},[]),o.useEffect(()=>{I(),A(),j()},[n,l,c]),r("div",{children:[r("div",{className:"flex items-center justify-between mb-10",children:[r("div",{className:"flex items-center",children:[t("div",{className:"mr-2",children:"Filter by Contact CS"}),t(B,{value:c,showSearch:!0,placeholder:"Choose Contact",fetchOptions:Y,filterOption:(e,a)=>{var s;return(((s=a==null?void 0:a.label)==null?void 0:s.toLowerCase())??"").includes(e.toLowerCase())},defaultOptions:g,className:"w-",onChange:e=>{v(e==null?void 0:e.value)}})]}),r("div",{className:"flex items-center",children:[t("div",{className:"mr-2",children:"Filter"}),t(H.RangePicker,{format:"YYYY-MM-DD",onChange:(e,a)=>{console.log(a,"dateString"),w(a[0]),C(a[1])},className:"w-full"})]})]}),r("div",{className:"grid grid-cols-10 gap-5",children:[r("div",{className:"grid col-span-2 gap-4",children:[r("div",{className:"h-full w-full rounded-md p-2 border shadow-sm",children:[t("span",{className:"font-medium text-sm",children:"Total Prospect"}),t("br",{}),t("div",{className:"border-t my-2"}),t("br",{}),t("h1",{className:"text-3xl font-medium text-blueColor",children:i(d==null?void 0:d.length)})]}),r("div",{className:"h-full w-full rounded-md p-2 border shadow-sm",children:[t("span",{className:"font-medium text-sm",children:"Total Activity"}),t("br",{}),t("div",{className:"border-t my-2"}),t("br",{}),t("h1",{className:"text-3xl font-medium text-orangeOrder",children:i(D)})]})]}),r("div",{className:"col-span-4 h-full w-full rounded-md p-2 border shadow-sm",children:[t("span",{className:"font-medium text-sm",children:"Prospect Status"}),t("br",{}),t("div",{className:"border-t my-2"}),t("div",{className:"mt-4",children:[...P].map((e,a)=>r("div",{className:"flex justify-between items-center border-b mb-2.5 pb-2.5",children:[e.name,t(b,{showZero:!0,style:{color:"black"},overflowCount:999,color:"#E5F9FF",count:i(e.count)})]},a))})]}),r("div",{className:"col-span-4 h-full w-full rounded-md p-2 border shadow-sm",children:[t("span",{className:"font-medium text-sm",children:"Prospect Tag"}),t("br",{}),t("div",{className:"border-t my-2"}),t("div",{className:"mt-4",children:[...E,{name:"Loyal Customer",tag:"loyal",count:0}].map((e,a)=>r("div",{className:"flex justify-between items-center border-b mb-2.5 pb-2.5",children:[e.name,t(b,{showZero:!0,style:{color:"black"},overflowCount:999,color:"#E5F9FF",count:i(e.count)})]},a))})]})]}),r("div",{children:[r("div",{className:"flex justify-between items-center py-4 mt-4",children:[t("div",{className:"text-base font-medium",children:"List Data Prospect"}),r(Z,{className:"text-black font-medium rounded-lg text-sm text-center inline-flex items-center",onClick:M,children:[y&&t($,{}),"Export by Excel"]})]}),t(q,{loading:x,columns:F,dataSource:d,rowSelection:!0,scroll:{x:"max-content"},tableLayout:"auto"})]})]})};export{Q as default};
