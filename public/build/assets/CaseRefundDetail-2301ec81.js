import{u as I,s as T,r as i,n as P,q as _,b as s,j as e,v as O,w,P as C,L as p,x as R,y as S,T as g,t as c}from"./app-9807f797.js";import{a as j,b as L}from"./config-4d5bf6c9.js";const G=()=>{var m;const N=I(),{uid_refund:d}=T(),[n,b]=i.useState(null),[t,o]=i.useState(!1),l=()=>{o(!0),axios.get(`/api/case/refund/detail/${d}`).then(a=>{const{data:r}=a.data;b(r),o(!1)})};i.useEffect(()=>{l()},[]);const v=()=>{axios.post("/api/case/refund/reject",{uid_refund:d}).then(a=>{const{message:r}=a.data;c.success(r,{position:c.POSITION.TOP_RIGHT}),l()}).catch(a=>{const{message:r}=a.response.data;c.error(r,{position:c.POSITION.TOP_RIGHT})})},y=()=>{axios.post("/api/case/refund/approve",{uid_refund:d}).then(a=>{const{message:r}=a.data;c.success(r,{position:c.POSITION.TOP_RIGHT}),l()}).catch(a=>{const{message:r}=a.response.data;c.error(r,{position:c.POSITION.TOP_RIGHT})})},h=!P(_("role"),["adminsales","leadsales"]),x=s("div",{children:[(n==null?void 0:n.status)==="0"&&s("div",{children:[h&&s("button",{onClick:()=>{v()},className:"mr-4 text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-4 py-2 text-center inline-flex items-center",children:[e(O,{}),e("span",{className:"ml-2",children:"Tolak Pengajuan"})]}),h&&s("button",{onClick:()=>{y()},className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 text-center inline-flex items-center",children:[e(w,{}),e("span",{className:"ml-2",children:"Terima Pengajuan"})]})]}),(n==null?void 0:n.status)==="1"&&s("button",{onClick:()=>{N("/order/sales-refund/form/"+d)},className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 text-center inline-flex items-center",children:[e(C,{}),e("span",{className:"ml-2",children:"Sales Refund"})]})]}),u=(n?(m=n==null?void 0:n.refund_items)==null?void 0:m.map((a,r)=>{var f;if(a!=null&&a.product)return{id:a.id,qty:a.qty,product_name:((f=a==null?void 0:a.product)==null?void 0:f.name)||"-",product_photo:a.product_photo_url}}):[]).filter(a=>a);return t?e(p,{title:"Detail Case Refund",href:"/case/refund",children:e(R,{})}):e(p,{title:"Detail Case Refund",rightContent:x,href:"/case/refund",children:s("div",{className:"row",children:[e("div",{className:"col-md-6",children:s("div",{className:"card",children:[e("div",{className:"card-header",children:e("div",{className:"h1 card-title",children:"Informasi Pribadi"})}),e("div",{className:"card-body",children:e("table",{className:"w-100 table-auto",children:s("tbody",{children:[s("tr",{children:[e("td",{className:"py-2",children:e("strong",{children:"Name"})}),e("td",{children:":"}),e("td",{children:n==null?void 0:n.name})]}),s("tr",{children:[e("td",{className:"py-2",children:e("strong",{children:"Email"})}),e("td",{children:":"}),e("td",{children:n==null?void 0:n.email})]}),s("tr",{children:[e("td",{className:"py-2",children:e("strong",{children:"Phone"})}),e("td",{children:":"}),e("td",{children:(n==null?void 0:n.handphone)||"-"})]}),s("tr",{children:[e("td",{className:"py-2",children:e("strong",{children:"Status"})}),e("td",{children:":"}),e("td",{children:(n==null?void 0:n.status_refund)||"-"})]}),s("tr",{children:[e("td",{className:"py-2",children:e("strong",{children:"Address"})}),e("td",{children:":"}),e("td",{children:S(n==null?void 0:n.address)})]})]})})})]})}),e("div",{className:"col-md-6",children:s("div",{className:"card",children:[e("div",{className:"card-header",children:e("div",{className:"h1 card-title",children:"Informasi Pengajuan Komplain"})}),e("div",{className:"card-body",children:e("table",{className:"w-100",children:s("tbody",{children:[s("tr",{children:[e("td",{className:"py-2",children:e("strong",{children:"Complain Type"})}),s("td",{children:[": ",n==null?void 0:n.type_case]})]}),s("tr",{children:[e("td",{className:"py-2",children:e("strong",{children:"Transaction From"})}),s("td",{children:[": ",n==null?void 0:n.transaction_from]})]}),s("tr",{children:[e("td",{className:"py-2",children:e("strong",{children:"Transaction Id"})}),s("td",{children:[": ",(n==null?void 0:n.transaction_id)||"-"]})]}),s("tr",{children:[e("td",{className:"py-2",children:e("strong",{children:"Transfer Photo"})}),s("td",{children:[":"," ",e("span",{children:n!=null&&n.transfer_photo?e("a",{href:n==null?void 0:n.transfer_photo_url,children:"Download Attachment"}):"-"})]})]}),s("tr",{children:[e("td",{className:"py-2",children:e("strong",{children:"Alsan"})}),s("td",{children:[": ",(n==null?void 0:n.alasan)||"-"]})]})]})})})]})}),u.length>0&&e("div",{className:"col-md-12",children:s("div",{className:"card",children:[e("div",{className:"card-header",children:e("div",{className:"h1 card-title",children:"Informasi Product"})}),e("div",{className:"card-body",children:e(g,{dataSource:u,columns:j,loading:t,pagination:!1,rowKey:"id",scroll:{x:"max-content"},tableLayout:"auto"})})]})}),e("div",{className:"col-md-12",children:s("div",{className:"card",children:[e("div",{className:"card-header flex justify-between items-center",children:e("div",{className:"h1 card-title",children:"Informasi Pengembalian Barang"})}),e("div",{className:"card-body",children:e(g,{dataSource:(n==null?void 0:n.retur_resis)||[],columns:L,loading:t,pagination:!1,rowKey:"id",scroll:{x:"max-content"},tableLayout:"auto"})})]})})]})})};export{G as default};
