import{r as a,b as s,j as e,ao as I,ap as j,M as A,ah as d,aq as z,u as $,L as q,I as K,C as G,o as H,T as J,ar as Q,p as U,a as _,as as V,d as W,at as X,P as Z}from"./app-28883065.js";const{RangePicker:ee}=z,te=({handleOk:x})=>{const[v,r]=a.useState(!1),[u,m]=a.useState(!1),[C,N]=a.useState([]),[o,i]=a.useState({roles:null,status:null,createdBy:null}),b=()=>{h(),r(!0)},h=()=>{axios.get("/api/master/role").then(l=>{N(l.data.data)})};a.useEffect(()=>{h()},[]);const S=()=>{r(!1),m(!1),i({roles:null,status:null,createdBy:null})},p=(l,c)=>{if(c==="createdBy")return i({...o,createdBy:l.value});i({...o,[c]:l})};return s("div",{children:[u?s("button",{onClick:()=>b(),className:"text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-4 py-2 text-center inline-flex items-center",children:[e(I,{}),e("span",{className:"ml-2",children:"Show Filter"})]}):s("button",{onClick:()=>b(),className:" bg-white border  text-blue-700 hover:text-blue-700/90 delay-100 ease-in-out focus:ring-4 focus:outline-none focus:ring-blue-300  font-medium rounded-lg  text-sm px-4 py-2 text-center inline-flex items-center ",children:[e(j,{}),e("span",{className:"ml-2",children:"Filter"})]}),s(A,{title:"Filter Contact",open:v,onOk:()=>{x(o),m(!0),r(!1)},cancelText:u?"Clear Filter":"Cancel",onCancel:u?()=>{r(!1),m(!1),i({roles:null,status:null,createdBy:null}),x({})}:S,okText:"Apply Filter",children:[s("div",{children:[s("div",{children:[e("label",{htmlFor:"",children:"Role"}),e(d,{mode:"multiple",allowClear:!0,className:"w-full mb-2",placeholder:"Select Role",onChange:l=>p(l,"roles"),children:C.map(l=>e(d.Option,{value:l.id,children:l.role_name},l.id))})]}),s("div",{children:[e("label",{htmlFor:"",children:"Status"}),s(d,{mode:"multiple",allowClear:!0,className:"w-full mb-2",placeholder:"Select Order Status",onChange:l=>p(l,"status"),children:[e(d.Option,{value:1,children:"Active"},1),e(d.Option,{value:0,children:"Non Active"},0),e(d.Option,{value:2,children:"Blacklist"},2)]})]})]}),s("div",{className:"mb-2",children:[e("label",{htmlFor:"",children:"Create Date"}),e(ee,{className:"w-full",format:"YYYY-MM-DD",onChange:(l,c)=>p(c,"created_at")})]})]})]})},se=()=>{const x=$(),[v,r]=a.useState(!1),[u,m]=a.useState([]),[C,N]=a.useState(0),[o,i]=a.useState(""),[b,h]=a.useState(!1),[S,p]=a.useState(1),[F,l]=a.useState({}),[c,y]=a.useState(!1),[k,D]=a.useState([]),f=(n="/api/contact",g=10,P={page:S})=>{r(!0),_.post(n,{perpage:g,...P}).then(Y=>{const{data:O,total:R,current_page:T}=Y.data.data;N(R),p(T);const B=O.map(t=>({key:t.id,uid:t.uid,name:t.name,telepon:t.telepon,email:t.email,role:t==null?void 0:t.role.role_name,created_by:t==null?void 0:t.created_by_name,created_on:V(t.created_at).format("DD-MM-YYYY"),total_activity:(t==null?void 0:t.total_activity)||0,total_prospect:(t==null?void 0:t.total_prospect)||0}));D(O.map(t=>t.role.role_type)),m(B),r(!1)}).catch(()=>r(!1))};a.useEffect(()=>{f()},[]);const M=(n,g=10)=>{f(`/api/contact/?page=${n}`,g,{search:o,page:n,...F})},w=()=>{h(!0),f("/api/contact",10,{search:o})},E=n=>{l(n),f("/api/contact",10,n)},L=()=>{y(!0),_.post("/api/contact/export/").then(n=>{const{data:g}=n.data;window.open(g),y(!1)}).catch(n=>y(!1))};return s(q,{rightContent:s("div",{className:"flex justify-between items-center",children:[e(te,{handleOk:E,roleSelected:k||[]}),s("button",{className:"ml-3 text-white bg-green-800 hover:bg-green-800 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-4 py-2 text-center inline-flex items-center mr-2",onClick:()=>L(),children:[c?e(W,{}):e(X,{}),e("span",{className:"ml-2",children:"Export"})]}),s("button",{onClick:()=>x("/contact/create"),className:"text-white bg-blueColor hover:bg-blueColor/90 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 text-center inline-flex items-center ml-2",children:[e(Z,{}),e("span",{className:"ml-2",children:"Tambah Data"})]})]}),title:"List Contact",children:[s("div",{className:"row mb-4",children:[e("div",{className:"col-md-12"}),e("div",{className:"col-md-4 col-sm-6 col-12",children:e(K,{placeholder:"Cari disini",size:"large",className:"rounded",onPressEnter:()=>w(),suffix:b?e(G,{onClick:()=>{f(),i(null),h(!1)}}):e(H,{onClick:()=>w()}),value:o,onChange:n=>i(n.target.value)})}),e("div",{className:"col-md-8",children:s("strong",{className:"float-right mt-3 text-red-400",children:["Total Data: ",C]})})]}),e(J,{dataSource:u,columns:Q,loading:v,pagination:!1,rowKey:"id",scroll:{x:"max-content"},tableLayout:"auto"}),e(U,{defaultCurrent:1,current:S,total:C,className:"mt-4 text-center",onChange:M,pageSizeOptions:["10","20","50","100","200","500"]})]})};export{se as default};
