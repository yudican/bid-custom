import{r as s,b as l,j as e,ao as I,ap as j,M as A,ah as d,I as x,aq as z,u as $,L as q,C as K,o as G,T as H,ar as J,p as Q,a as M,as as U,ak as O,d as V,at as W,P as X}from"./app-da34ef76.js";const{RangePicker:Z}=z,ee=({handleOk:b})=>{const[S,r]=s.useState(!1),[u,m]=s.useState(!1),[C,F]=s.useState([]),[o,i]=s.useState({roles:null,status:null,createdBy:null}),v=()=>{h(),r(!0)},h=()=>{axios.get("/api/master/role").then(a=>{F(a.data.data)})};s.useEffect(()=>{h()},[]);const N=()=>{r(!1),m(!1),i({roles:null,status:null,createdBy:null})},p=(a,c)=>{if(c==="createdBy")return i({...o,createdBy:a.value});i({...o,[c]:a})};return l("div",{children:[u?l("button",{onClick:()=>v(),className:"text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-4 py-2 text-center inline-flex items-center",children:[e(I,{}),e("span",{className:"ml-2",children:"Show Filter"})]}):l("button",{onClick:()=>v(),className:" bg-white border  text-blue-700 hover:text-blue-700/90 delay-100 ease-in-out focus:ring-4 focus:outline-none focus:ring-blue-300  font-medium rounded-lg  text-sm px-4 py-2 text-center inline-flex items-center ",children:[e(j,{}),e("span",{className:"ml-2",children:"Filter"})]}),l(A,{title:"Filter Contact",open:S,onOk:()=>{b(o),m(!0),r(!1)},cancelText:u?"Clear Filter":"Cancel",onCancel:u?()=>{r(!1),m(!1),i({roles:null,status:null,createdBy:null}),b({})}:N,okText:"Apply Filter",children:[l("div",{children:[l("div",{children:[e("label",{htmlFor:"",children:"Role"}),e(d,{mode:"multiple",allowClear:!0,className:"w-full mb-2",placeholder:"Select Role",onChange:a=>p(a,"roles"),children:C.map(a=>e(d.Option,{value:a.id,children:a.role_name},a.id))})]}),l("div",{children:[e("label",{htmlFor:"",children:"Status"}),l(d,{mode:"multiple",allowClear:!0,className:"w-full mb-2",placeholder:"Select Order Status",onChange:a=>p(a,"status"),children:[e(d.Option,{value:1,children:"Active"},1),e(d.Option,{value:0,children:"Non Active"},0),e(d.Option,{value:2,children:"Blacklist"},2)]})]})]}),l("div",{className:"mb-2",children:[e("label",{htmlFor:"",children:"Create Date"}),e(Z,{className:"w-full",format:"YYYY-MM-DD",onChange:(a,c)=>p(c,"created_at")})]}),l("div",{className:"row mb-2",children:[l("div",{className:"col-md-6",children:[e("label",{htmlFor:"",children:"Range Deposito"}),e(x,{placeholder:"Min"})]}),l("div",{className:"col-md-6",children:[e("label",{htmlFor:"",children:" "}),e(x,{placeholder:"Max"})]})]}),l("div",{className:"row",children:[l("div",{className:"col-md-6",children:[e("label",{htmlFor:"",children:"Range Stock"}),e(x,{placeholder:"Min"})]}),l("div",{className:"col-md-6",children:[e("label",{htmlFor:"",children:" "}),e(x,{placeholder:"Max"})]})]})]})]})},ae=()=>{const b=$(),[S,r]=s.useState(!1),[u,m]=s.useState([]),[C,F]=s.useState(0),[o,i]=s.useState(""),[v,h]=s.useState(!1),[N,p]=s.useState(1),[y,a]=s.useState({}),[c,w]=s.useState(!1),f=(n="/api/contact",g=10,L={page:N})=>{r(!0),M.post(n,{perpage:g,...L}).then(P=>{const{data:Y,total:R,current_page:T}=P.data.data;F(R),p(T);const B=Y.map(t=>({key:t.id,name:t.name,telepon:t.telepon,email:t.email,role:t==null?void 0:t.role.role_name,created_by:t==null?void 0:t.created_by_name,created_on:U(t.created_at).format("DD-MM-YYYY"),deposit:O(t==null?void 0:t.deposit),total_debt:O(t==null?void 0:t.amount_detail.total_debt)}));m(B),r(!1)}).catch(()=>r(!1))};s.useEffect(()=>{f()},[]);const D=(n,g=10)=>{f(`/api/contact/?page=${n}`,g,{search:o,page:n,...y})},k=()=>{h(!0),f("/api/contact",10,{search:o})},_=n=>{a(n),f("/api/contact",10,n)},E=()=>{w(!0),M.post("/api/contact/export/").then(n=>{const{data:g}=n.data;window.open(g),w(!1)}).catch(n=>w(!1))};return l(q,{rightContent:l("div",{className:"flex justify-between items-center",children:[e(ee,{handleOk:_}),l("button",{className:"ml-3 text-white bg-green-800 hover:bg-green-800 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-4 py-2 text-center inline-flex items-center mr-2",onClick:()=>E(),children:[c?e(V,{}):e(W,{}),e("span",{className:"ml-2",children:"Export"})]}),l("button",{onClick:()=>b("/contact/create"),className:"text-white bg-blueColor hover:bg-blueColor/90 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 text-center inline-flex items-center ml-2",children:[e(X,{}),e("span",{className:"ml-2",children:"Tambah Data"})]})]}),title:"List Contact",children:[l("div",{className:"row mb-4",children:[e("div",{className:"col-md-12"}),e("div",{className:"col-md-4 col-sm-6 col-12",children:e(x,{placeholder:"Cari disini",size:"large",className:"rounded",onPressEnter:()=>k(),suffix:v?e(K,{onClick:()=>{f(),i(null),h(!1)}}):e(G,{onClick:()=>k()}),value:o,onChange:n=>i(n.target.value)})}),e("div",{className:"col-md-8",children:l("strong",{className:"float-right mt-3 text-red-400",children:["Total Data: ",C]})})]}),e(H,{dataSource:u,columns:J,loading:S,pagination:!1,rowKey:"id",scroll:{x:"max-content"},tableLayout:"auto"}),e(Q,{defaultCurrent:1,current:N,total:C,className:"mt-4 text-center",onChange:D,pageSizeOptions:["10","20","50","100","200","500"]})]})};export{ae as default};
