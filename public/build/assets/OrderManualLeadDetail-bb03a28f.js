import{u as Je,b as n,j as e,D as Ce,bE as I,f as P,a$ as ve,bq as Ve,T as h,q as ne,F as Se,r as b,aY as ze,v as He,P as Ye,S as Qe,s as Xe,ak as N,n as V,L as we,x as Ze,bw as Ie,a_ as _,b1 as Ue,bt as L,ah as S,c as ee,d as ae,bF as De,bJ as z,ai as ea,a as p,m as w,bH as aa,bI as na,bG as la,w as ta,at as sa}from"./app-28883065.js";import{M as da}from"./ModalBilling-9bb30b20.js";import{s as ke,p as F,b as H,a as ca,n as ia}from"./config-adde520c.js";const Y=({order:c=null,printUrl:l})=>{var a,C,x,r,u,v,T;return Je(),n("div",{className:"card",children:[n("div",{className:"card-header flex items-center justify-between",children:[e("h1",{className:"text-lg text-bold ",children:c==null?void 0:c.title}),e("div",{children:e(Ce.Button,{style:{borderRadius:10},icon:e(I,{}),overlay:n(P,{children:[(c==null?void 0:c.status)!=1&&n(P.Item,{className:"flex justify-between items-center",children:[e(I,{})," ",e("a",{href:l==null?void 0:l.si,target:"_blank",children:e("span",{children:"Print SI"})})]}),n(P.Item,{className:"flex justify-between items-center",children:[e(I,{})," ",e("a",{href:l==null?void 0:l.so,target:"_blank",children:e("span",{children:"Print SO"})})]}),n(P.Item,{className:"flex justify-between items-center",children:[e(I,{})," ",e("a",{href:l==null?void 0:l.sj,target:"_blank",children:e("span",{children:"Print SJ"})})]})]})})})]}),n("div",{className:"card-body row",children:[e("div",{className:"col-md-6",children:e("table",{className:"w-100",style:{width:"100%"},children:n("tbody",{children:[n("tr",{children:[e("td",{style:{width:"50%"},className:"py-2",children:e("strong",{children:"Contact"})}),n("td",{children:[": ",((a=c==null?void 0:c.contact_user)==null?void 0:a.name)||"-"]})]}),n("tr",{children:[e("td",{style:{width:"50%"},className:"py-2",children:e("strong",{children:"Company"})}),n("td",{children:[": ",ve((x=(C=c==null?void 0:c.contact_user)==null?void 0:C.company)==null?void 0:x.name)||"-"]})]}),n("tr",{children:[e("td",{style:{width:"50%"},className:"py-2",children:e("strong",{children:"Customer Need"})}),n("td",{children:[": ",(c==null?void 0:c.customer_need)||"-"]})]}),n("tr",{children:[e("td",{style:{width:"50%"},className:"py-2",children:e("strong",{children:"PIC Sales"})}),n("td",{children:[": ",((r=c==null?void 0:c.sales_user)==null?void 0:r.name)||"-"]})]}),n("tr",{children:[e("td",{style:{width:"50%"},className:"py-2",children:e("strong",{children:"Created On"})}),n("td",{children:[": ",Ve(c==null?void 0:c.created_at)||"-"]})]}),n("tr",{children:[e("td",{style:{width:"50%"},className:"py-2",children:e("strong",{children:"Created By"})}),n("td",{children:[": ",((u=c==null?void 0:c.create_user)==null?void 0:u.name)||"-"]})]})]})})}),e("div",{className:"col-md-6",children:e("table",{className:"w-100",style:{width:"100%"},children:n("tbody",{children:[n("tr",{children:[e("td",{style:{width:"50%"},className:"py-2",children:e("strong",{children:"PIC Warehouse"})}),n("td",{children:[": ",((v=c==null?void 0:c.courier_user)==null?void 0:v.name)||"-"]})]}),n("tr",{children:[e("td",{style:{width:"50%"},className:"py-2",children:e("strong",{children:"Warehouse"})}),n("td",{children:[": ",ve(c==null?void 0:c.warehouse_name)||"-"]})]}),n("tr",{children:[e("td",{style:{width:"50%"},className:"py-2",children:e("strong",{children:"Order Number"})}),n("td",{children:[": ",(c==null?void 0:c.order_number)||"-"]})]}),n("tr",{children:[e("td",{style:{width:"50%"},className:"py-2",children:e("strong",{children:"Invoice Number"})}),n("td",{children:[": ",(c==null?void 0:c.invoice_number)||"-"]})]}),n("tr",{children:[e("td",{style:{width:"50%"},className:"py-2",children:e("strong",{children:"Payment Term"})}),n("td",{children:[": ",((T=c==null?void 0:c.payment_term)==null?void 0:T.name)||"-"]})]}),n("tr",{children:[e("td",{style:{width:"50%"},className:"py-2",children:e("strong",{children:"Due Date"})}),n("td",{children:[": ",(c==null?void 0:c.due_date)||"-"]})]})]})})})]})]})},ra=({dataSource:c,handleChangeCell:l,handleClickCell:a})=>{const x=[{title:"Contact",dataIndex:"contact",key:"contact"},{title:"Before 7 Days",dataIndex:"before_7_day",key:"before_7_day"},{title:"Before 3 Days",dataIndex:"before_3_day",key:"before_3_day"},{title:"Before 1 Days",dataIndex:"before_1_day",key:"before_1_day"},{title:"After 7 Days",dataIndex:"after_7_day",key:"after_7_day"},{title:"#",dataIndex:"action",key:"action"}].map(r=>({...r,onCell:u=>({record:u,dataIndex:r.dataIndex,handleChange:v=>l(v),handleClick:v=>a(v)})}));return e("div",{className:"card",children:n("div",{className:"card-body",children:[e("div",{className:"card-header",children:e("h1",{className:"text-lg text-bold",children:"Set Reminder"})}),e("div",{className:"row",children:e("div",{className:"col-md-12",children:e(h,{components:{body:{cell:oa}},columns:x,dataSource:c,rowKey:"key",scroll:{x:"max-content"},tableLayout:"auto"})})})]})})},oa=c=>{var W;const l=ne("user_data",!0);Se.useForm();const{dataIndex:a,handleChange:C,handleClick:x,record:r}=c,[u,v]=b.useState([]),T=()=>{ke(null).then(k=>{const B=k.map(R=>({label:R.nama,value:R.id}));v(B)})};b.useEffect(()=>{T()},[]);const X=async k=>await ke(k).then(B=>B.map(f=>({label:f.nama,value:f.id})));return a==="contact"?e("td",{children:e(ze,{showSearch:!0,placeholder:"Cari Contact",fetchOptions:X,filterOption:!1,className:"w-full mb-2",options:[r.contactUser],defaultOptions:r.contact?[r.contact]:u,value:(W=r==null?void 0:r.contact)==null?void 0:W.value,onChange:k=>C({value:k,dataIndex:a,key:r.key,uid_lead:r.uid_lead,reminder_id:r.reminder_id})})}):a==="action"?r.key>0?e("td",{children:e("button",{onClick:()=>x({key:r.reminder_id,type:"delete"}),className:"text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-4 py-2 text-center inline-flex items-center",children:e(He,{})})}):e("td",{children:e("button",{onClick:()=>x({key:r.key,type:"plus"}),className:`text-white
          ${(l==null?void 0:l.role.role_type)==="sales"?"bg-gray-500":"bg-blue-700 hover:bg-blue-800"} focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 text-center inline-flex items-center`,children:e(Ye,{})})}):e("td",{children:e(Qe,{checked:r[a],onChange:k=>C({value:k,dataIndex:a,key:r.key,uid_lead:r.uid_lead,reminder_id:r.reminder_id})})})},{Step:Q}=Ie,ba=()=>{var me,be,fe,ye,pe,ge,_e;Se.useForm();const c=Xe(),l=ne("user_data",!0),[a,C]=b.useState(null),[x,r]=b.useState([]),[u,v]=b.useState([]),[T,X]=b.useState([]),[W,k]=b.useState([]),[B,R]=b.useState([]),[f,Pe]=b.useState(null),[Te,Ae]=b.useState([]),[Oe,je]=b.useState([]),[E,$]=b.useState(null),[Le,Z]=b.useState(!1),[K,le]=b.useState([{key:0,contact:null,before_7_day:!1,before_3_day:!1,before_1_day:!1,after_7_day:!1}]),[y,te]=b.useState(!1),[se,de]=b.useState(!1),g=()=>{te(!0),p.get(`/api/order-manual/${c.uid_lead}`).then(t=>{var j;const{data:d,print:m}=t.data;if(Pe(m),C(d),$(d.notes),d.reminders.length>0){const s=d.reminders.map((O,J)=>({key:J,reminder_id:O.id,contact:O.contactUser,before_7_day:O.before_7_day>0,before_3_day:O.before_3_day>0,before_1_day:O.before_1_day>0,after_7_day:O.after_7_day>0}));le(s)}const o=(j=d==null?void 0:d.billings)==null?void 0:j.map(s=>({id:s.id,account_name:s.account_name,account_bank:s.account_bank,total_transfer:s.total_transfer,transfer_date:s.transfer_date,upload_billing_photo:s.upload_billing_photo_url,upload_transfer_photo:s.upload_transfer_photo_url,status:s.status,notes:s.notes??"-",approved_by_name:s.approved_by_name,approved_at:s.approved_at||"-",payment_number:s.payment_number||"-"})),A=d.product_needs&&d.product_needs.map(s=>{var J,xe,Ne;return{id:s.id,product:((J=s==null?void 0:s.product)==null?void 0:J.name)||"-",product_id:s==null?void 0:s.product_id,price:N((xe=s==null?void 0:s.prices)==null?void 0:xe.final_price),qty:s==null?void 0:s.qty,total_price:N(s==null?void 0:s.total),final_price:N(s==null?void 0:s.final_price),margin_price:N(s==null?void 0:s.margin_price),discount_id:s==null?void 0:s.discount_id,tax_id:s==null?void 0:s.tax_id,tax_amount:N(s==null?void 0:s.tax_amount),price_nego:s==null?void 0:s.price_nego,price_product:N(s==null?void 0:s.price),total_price_nego:N((s==null?void 0:s.price_nego)*(s==null?void 0:s.qty)),subtotal:N(((Ne=s==null?void 0:s.prices)==null?void 0:Ne.final_price)*(s==null?void 0:s.qty)),disabled_discount:s==null?void 0:s.disabled_discount,disabled_price_nego:s==null?void 0:s.disabled_price_nego,disabled:(d==null?void 0:d.status)>1}});v(A),X(o),k(d==null?void 0:d.lead_activities),R(d==null?void 0:d.negotiations),te(!1)})},ce=({dataIndex:t,value:d,id:m,index:o})=>{p.post("/api/general/update-product-need",{value:d,field:t,uid_lead:c.uid_lead,item_id:m}).then(A=>{const j=A.data,s=[...u];s[o][t]=d,v(s),w.success(j.message),g()})},Be=()=>{de(!0),p.get("/api/general/warehouse-user").then(t=>{const{data:d}=t.data;r(d),de(!1)})},ie=()=>{p.get(`/api/order-manual/assign-warehouse/${c.uid_lead}`).then(t=>{g(),w.success("Assign Warehouse Success")}).catch(t=>{w.error("Assign Warehouse Failed")})},Re=()=>{p.get("/api/master/taxs").then(t=>{Ae(t.data.data)})},Ke=()=>{p.get("/api/master/discounts/sales-offline").then(t=>{je(t.data.data)})};b.useEffect(()=>{g(),Be(),Re(),Ke()},[]);const Fe=({value:t,dataIndex:d,key:m,reminder_id:o})=>{const A=[...K];A[m][d]=t,t!=null&&t.value&&(A[m].contact={label:t.label,value:t.value},t=t.value),le(A),p.post("/api/order-manual/reminder/update",{field:d,value:t,reminder_id:o,uid_lead:c.uid_lead}).then(j=>{}).catch(j=>{})},re=()=>{p.post("/api/order-manual/reminder/save",{uid_lead:c.uid_lead}).then(t=>{g()}).catch(t=>{})},We=({key:t,type:d})=>{d==="plus"?(re(),K&&K.length===1&&K.find(o=>!o.reminder_id)&&re()):d==="delete"&&p.get(`/api/order-manual/reminder/delete/${t}`).then(m=>{g()}).catch(m=>{})},oe=t=>{(a==null?void 0:a.courier)!==t&&p.post("/api/order-manual/change-courier",{courier:t,uid_lead:a.uid_lead}).then(d=>{g(),w.success("Berhasil mengubah kurir")}).catch(d=>{w.error("Gagal mengubah kurir")})},Ee=()=>{p.get(`/api/order-manual/closed/${a.uid_lead}`).then(t=>{g(),w.success("Order Lead berhasil di tutup")})},U=()=>{p.post("/api/general/order/update-notes",{uid_lead:a.uid_lead,notes:E,type:"manual"}).then(t=>{w.success("Notes Berhasil Disimpan")})},he=(t,d)=>{const m=d===1?"Approve":"Reject";p.post("/api/order-manual/billing/verify",{status:d,...t}).then(o=>{g(),w.success(`${m} Billing Success`)}).catch(o=>{w.error(`${m} Billing Failed`)})},$e=t=>{p.post("/api/order-manual/shipping/save",t).then(d=>{w.success("Resi Berhasil Disimpan"),g()}).catch(d=>{w.error("Resi Gagal Disimpan")})},q=[{label:"Sub Total",value:N(parseInt(a==null?void 0:a.subtotal))},{label:"Kode Unik",value:a==null?void 0:a.kode_unik},{label:"Ongkir",value:a==null?void 0:a.ongkir},{label:"Tax Total",value:N(parseInt(a==null?void 0:a.tax_amount))},{label:"Diskon",value:N(parseInt(a==null?void 0:a.discount_amount))},{label:"Total",value:N(parseInt(a==null?void 0:a.amount))}],M=({item:t,disabled:d=!1})=>n(h.Summary.Row,{children:[e(h.Summary.Cell,{index:0}),e(h.Summary.Cell,{index:1}),e(h.Summary.Cell,{index:2}),e(h.Summary.Cell,{index:3}),e(h.Summary.Cell,{index:4}),e(h.Summary.Cell,{index:5}),e(_,{isTrue:t.label==="Kode Unik",children:e(h.Summary.Cell,{index:6,children:e(aa,{item:t,order:a,refetch:g,url:"/api/order-manual/update/kode-unik",disabled:d})})}),e(_,{isTrue:t.label==="Ongkir",children:e(h.Summary.Cell,{index:6,children:e(na,{disabled:d,initialValues:{ongkir:a.ongkir},refetch:g,url:`/api/order-manual/update/ongkir/${a.uid_lead}`})})}),e(_,{isTrue:!V(t.label,["Kode Unik","Ongkir"]),children:e(h.Summary.Cell,{index:6,children:e("strong",{children:t.label})})}),e(h.Summary.Cell,{index:7,children:t.value})]}),qe=!V(ne("role"),["adminsales","leadsales","leadcs","warehouse"]),Me=[{title:"Action",dataIndex:"action",key:"action",render:(t,d,m)=>d.status==0&&a.amount_billing_approved>0&&a.amount_billing_approved<a.amount?"-":d.status==2?e("div",{className:"flex items-center justify-around",children:e("button",{className:"text-white bg-gray-700 hover:bg-gray-800 focus:ring-4 focus:outline-none focus:ring-gray-300 font-medium rounded-lg text-sm px-4 py-2 text-center inline-flex items-center",title:"Approve",children:"Rejected"})}):d.status==1?e("div",{className:"flex items-center justify-around",children:e("button",{className:"text-white bg-green-700 hover:bg-green-800 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-4 py-2 text-center inline-flex items-center",title:"Approve",children:"Approved"})}):qe?n("div",{className:"flex items-center justify-around",children:[e(la,{handleClick:o=>he({id:d.id,...o},2),user:l}),e("button",{onClick:()=>he({id:d.id,deposite:a.amount_deposite,billing_approved:a.amount_billing_approved,amount:a.amount},1),className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 text-center inline-flex items-center",title:"Approve",children:e(ta,{})})]}):null}],G=[{title:"Tax",dataIndex:"tax",key:"tax",render:(t,d,m)=>e(S,{disabled:d.disabled,placeholder:"Select Tax",value:d.tax_id,onChange:o=>ce({value:o,dataIndex:"tax_id",id:d.id,index:m}),children:Te.map(o=>e(S.Option,{value:o.id,children:o.tax_code},o.id))})},{title:"Discount",dataIndex:"discount",key:"discount",render:(t,d,m)=>e(S,{disabled:d.disabled||d.disabled_discount,placeholder:"Select Discount",value:d.discount_id,onChange:o=>ce({value:o,dataIndex:"discount_id",id:d.id,index:m}),children:Oe.map(o=>e(S.Option,{value:o.id,children:o.title},o.id))})},{title:"Subtotal",dataIndex:"subtotal",key:"subtotal"},{title:"Total Price",dataIndex:"total_price",key:"total_price"}],Ge=()=>{Z(!0),p.post(`/api/order-manual/export/detail/${c.uid_lead}`).then(t=>{const{data:d}=t.data;window.open(d),Z(!1)}).catch(t=>Z(!1))},ue=e("div",{className:"flex justify-between items-center",children:n("button",{className:"ml-3 text-white bg-green-800 hover:bg-green-800 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-4 py-2 text-center inline-flex items-center mr-2",onClick:()=>Ge(),children:[Le?e(ae,{}):e(sa,{}),e("span",{className:"ml-2",children:"Export"})]})}),{address_user:D,order_shipping:i}=a||{};return y?e(we,{title:"Detail",rightContent:ue,href:"/order/manual/order-lead",children:e(Ze,{})}):n(we,{title:"Detail",rightContent:ue,href:"/order/manual/order-lead",children:[n(Ie,{size:"small",current:(a==null?void 0:a.status)>0?a==null?void 0:a.status:0,style:{marginBottom:16},children:[e(Q,{title:"Draft"}),e(Q,{title:"New"}),e(Q,{title:"Open"}),e(Q,{status:(a==null?void 0:a.status)==="4"?"error":null,title:(a==null?void 0:a.status)==="4"?"Canceled":"Closed"})]}),e(_,{isTrue:V(a==null?void 0:a.status,["1"]),children:n("div",{children:[e(Y,{order:a,printUrl:f}),e(Ue,{title:"Address Information",data:((me=a==null?void 0:a.contact_user)==null?void 0:me.address_users)||[],contact:a==null?void 0:a.contact_user,refetch:()=>g()}),n("div",{className:"card",children:[e("div",{className:"card-header",children:e("h1",{className:"header-titl",children:"Informasi Pengiriman"})}),n("div",{className:"card-body",children:[e("table",{children:n("tbody",{children:[n("tr",{children:[e("td",{className:"w-32 md:w-56",children:"Order No"}),e("td",{className:"w-4",children:":"}),e("td",{children:a==null?void 0:a.order_number})]}),n("tr",{children:[e("td",{className:"w-32 md:w-56",children:"Tipe Pengiriman"}),e("td",{className:"w-4",children:":"}),e("td",{children:"Normal"})]}),n("tr",{children:[e("td",{className:"w-32 md:w-56",children:"Alamat"}),e("td",{className:"w-4",children:":"}),e("td",{children:a==null?void 0:a.selected_address})]})]})}),e(h,{scroll:{x:"max-content"},tableLayout:"auto",className:"mb-4",dataSource:u,columns:[...F,...G],loading:y,pagination:!1,rowKey:"id",summary:()=>u.length>0?e(L,{children:q.map((t,d)=>e(M,{item:t},d))}):null}),n(_,{isTrue:(l==null?void 0:l.role.role_type)!=="sales"&&((l==null?void 0:l.role.role_type)==="adminsales"||(l==null?void 0:l.role.role_type)==="leadsales"||(l==null?void 0:l.role.role_type)==="superadmin"),children:[e("p",{children:"Produk akan dikirim dengan kurir perusahaan. Silahkan assign nama pic kurir / bagian warehouse dibawah ini :"}),n("div",{children:[e("label",{htmlFor:"",className:"text-bold mb-2",children:"Pic Kurir / Bagian Warehouse"}),e(S,{loading:se,allowClear:!0,className:"w-full mb-2",placeholder:"Select Kurir",onChange:t=>oe(t),value:a==null?void 0:a.courier,children:x&&x.map(t=>e(S.Option,{value:t.id,children:t==null?void 0:t.name},t.id))}),e("small",{children:e("i",{children:"Anda dapat melakukan perubahan saat data belum masuk ke dalam proses assign to warehouse"})})]})]})]})]}),e(_,{isTrue:(l==null?void 0:l.role.role_type)!=="sales"&&((l==null?void 0:l.role.role_type)==="adminsales"||(l==null?void 0:l.role.role_type)==="leadsales"||(l==null?void 0:l.role.role_type)==="superadmin"),children:e("div",{className:"card",children:n("div",{className:"card-body",children:[e("p",{children:"Notes"}),e(ee,{placeholder:"notes",value:E,onChange:t=>$(t.target.value),onBlur:U})]})})}),(a==null?void 0:a.status)==1&&e(_,{isTrue:(l==null?void 0:l.role.role_type)!=="sales"&&((l==null?void 0:l.role.role_type)==="adminsales"||(l==null?void 0:l.role.role_type)==="leadsales"||(l==null?void 0:l.role.role_type)==="superadmin"),children:n("button",{className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 text-center inline-flex items-center ml-2 float-right",onClick:()=>{if(y)return null;ie()},disabled:y,children:[y&&e(ae,{}),"Assign To Warehouse"]})})]})}),e(_,{isTrue:(a==null?void 0:a.status)==="2",children:n("div",{children:[e(Y,{order:a,printUrl:f}),n("div",{className:"card",children:[n("div",{className:"card-header flex justify-between items-center",children:[e("h1",{className:"header-titl",children:"Informasi Pengiriman"}),e(_,{isTrue:(l==null?void 0:l.role.role_type)!=="sales",children:e(De,{hasInputed:i,onFinish:t=>$e(t),initialValues:i,fields:{uid_lead:a==null?void 0:a.uid_lead}})})]}),n("div",{className:"card-body",children:[e("table",{children:n("tbody",{children:[n("tr",{children:[e("td",{style:{width:"20%"},className:"text-bold",children:"Order No"}),n("td",{children:[": ",a==null?void 0:a.order_number]})]}),n("tr",{children:[e("td",{className:"text-bold",children:"Tipe Pengiriman"}),e("td",{children:": Normal"})]}),n("tr",{children:[e("td",{className:"text-bold",children:"Alamat"}),n("td",{children:[": ",(a==null?void 0:a.selected_address)||"-"]})]}),i&&n(L,{children:[n("tr",{children:[e("td",{children:"Pengirim"}),n("td",{children:[": ",i==null?void 0:i.sender_name]})]}),n("tr",{children:[e("td",{children:"Telfon Pengirim"}),n("td",{children:[": ",i==null?void 0:i.sender_phone]})]}),n("tr",{children:[e("td",{children:"Nama Ekspedisi"}),n("td",{children:[": ",i==null?void 0:i.expedition_name]})]}),n("tr",{children:[e("td",{children:"Resi"}),n("td",{children:[": ",i==null?void 0:i.resi]})]}),((be=i==null?void 0:i.attachment_url)==null?void 0:be.length)>0&&n("tr",{children:[e("td",{children:"Attachment"}),n("td",{children:[e("span",{children:": "}),n("a",{href:i==null?void 0:i.attachment_url[0],children:[e(z,{}),e("span",{children:"Attachment 1"})]})]})]}),(fe=i==null?void 0:i.attachment_url)==null?void 0:fe.map((t,d)=>{if(d>0)return n("tr",{children:[e("td",{}),n("td",{children:[e("span",{children:": "}),n("a",{href:t,children:[e(z,{}),n("span",{children:["Attachment ",d+1]})]})]})]})})]})]})}),e("div",{className:"mt-4",children:e(h,{scroll:{x:"max-content"},tableLayout:"auto",dataSource:u,columns:[...F,...G],loading:y,pagination:!1,rowKey:"id",summary:()=>u.length>0?e(L,{children:q.map((t,d)=>e(M,{item:t},d))}):null})})]})]}),n("div",{className:"card",children:[n("div",{className:"card-header flex justify-between items-center",children:[e("h1",{className:"header-title",children:"Informasi Penagihan"}),e(da,{detail:a,refetch:g,user:l})]}),e("div",{className:"card-body",children:e(h,{dataSource:T,columns:((ye=l==null?void 0:l.role)==null?void 0:ye.role_type)!=="sales"?[...H,...Me]:[...H],loading:y,pagination:!1,rowKey:"id",scroll:{x:"max-content"},tableLayout:"auto"})})]}),e(ra,{handleChangeCell:Fe,handleClickCell:We,dataSource:K}),e("div",{className:"card",children:n("div",{className:"card-body",children:[e("p",{children:"Notes"}),e(ee,{placeholder:"notes",value:E,onChange:t=>$(t.target.value),onBlur:U})]})}),e(_,{isTrue:(l==null?void 0:l.role.role_type)!=="sales"&&((l==null?void 0:l.role.role_type)==="finance"||(l==null?void 0:l.role.role_type)==="superadmin"),children:e("div",{className:"card",children:e("div",{className:"card-body",children:n("div",{className:"flex justify-between items-center",children:[e("p",{style:{width:"60%"},children:e("i",{children:"Pastikan Anda telah mendownload surat jalan dan melakukan pengemasan terlebih dahulu untuk melanjutkan ke proses Pengiriman Product"})}),n("button",{className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 text-center inline-flex items-center",onClick:Ee,children:[e(ea,{}),e("span",{className:"ml-2",children:"Payment Proccess"})]})]})})})})]})}),e(_,{isTrue:(a==null?void 0:a.status)==="3",children:n("div",{children:[e(Y,{order:a,printUrl:f}),n("div",{className:"card",children:[n("div",{className:"card-header flex justify-between items-center",children:[e("h1",{className:"header-title",children:"Lead Activity"}),e("div",{children:e(Ce.Button,{style:{borderRadius:10},icon:e(I,{}),overlay:n(P,{children:[n(P.Item,{className:"flex justify-between items-center",children:[e(I,{})," ",e("a",{href:f==null?void 0:f.si,target:"_blank",children:e("span",{children:"Print SI"})})]}),n(P.Item,{className:"flex justify-between items-center",children:[e(I,{})," ",e("a",{href:f==null?void 0:f.so,target:"_blank",children:e("span",{children:"Print SO"})})]}),n(P.Item,{className:"flex justify-between items-center",children:[e(I,{})," ",e("a",{href:f==null?void 0:f.sj,target:"_blank",children:e("span",{children:"Print SJ"})})]})]})})})]}),e("div",{className:"card-body",children:e(h,{dataSource:W,columns:ca,loading:y,pagination:!1,rowKey:"id",scroll:{x:"max-content"},tableLayout:"auto"})})]}),n("div",{className:"card",children:[e("div",{className:"card-header",children:e("h1",{className:"header-titl",children:"Informasi Pengiriman"})}),n("div",{className:"card-body",children:[e("table",{children:n("tbody",{children:[n("tr",{children:[e("td",{style:{width:"20%"},className:"text-bold",children:"Order No"}),n("td",{children:[": ",a==null?void 0:a.order_number]})]}),n("tr",{children:[e("td",{className:"text-bold",children:"Tipe Pengiriman"}),e("td",{children:": Normal"})]}),n("tr",{children:[e("td",{className:"text-bold",children:"Alamat"}),n("td",{children:[": ",(D==null?void 0:D.alamat_detail)||"-"]})]}),i&&n(L,{children:[n("tr",{children:[e("td",{children:"Pengirim"}),n("td",{children:[": ",i==null?void 0:i.sender_name]})]}),n("tr",{children:[e("td",{children:"Telfon Pengirim"}),n("td",{children:[": ",i==null?void 0:i.sender_phone]})]}),n("tr",{children:[e("td",{children:"Nama Ekspedisi"}),n("td",{children:[": ",i==null?void 0:i.expedition_name]})]}),n("tr",{children:[e("td",{children:"Resi"}),n("td",{children:[": ",i==null?void 0:i.resi]})]}),((pe=i==null?void 0:i.attachment_url)==null?void 0:pe.length)>0&&n("tr",{children:[e("td",{children:"Attachment"}),n("td",{children:[e("span",{children:": "}),n("a",{href:i==null?void 0:i.attachment_url[0],children:[e(z,{}),e("span",{children:"Attachment 1"})]})]})]}),(ge=i==null?void 0:i.attachment_url)==null?void 0:ge.map((t,d)=>{if(d>0)return n("tr",{children:[e("td",{}),n("td",{children:[e("span",{children:": "}),n("a",{href:t,children:[e(z,{}),n("span",{children:["Attachment ",d+1]})]})]})]})})]})]})}),e("div",{className:"mt-4",children:e(h,{scroll:{x:"max-content"},tableLayout:"auto",dataSource:u,columns:[...F,...G],loading:y,pagination:!1,rowKey:"id",summary:()=>u.length>0?e(L,{children:q.map((t,d)=>e(M,{item:t,disabled:!0},d))}):null})})]})]}),n("div",{className:"card",children:[e("div",{className:"card-header flex justify-between items-center",children:e("h1",{className:"header-title",children:"Product Need"})}),e("div",{className:"card-body",children:e(h,{dataSource:u,columns:F,loading:y,pagination:!1,rowKey:"id",scroll:{x:"max-content"},tableLayout:"auto"})})]}),n("div",{className:"card",children:[e("div",{className:"card-header flex justify-between items-center",children:e("h1",{className:"header-title",children:"Informasi Penagihan"})}),e("div",{className:"card-body",children:e(h,{dataSource:T,columns:((_e=l==null?void 0:l.role)==null?void 0:_e.role_type)!=="sales"?[...H]:[...H],loading:y,pagination:!1,rowKey:"id",scroll:{x:"max-content"},tableLayout:"auto"})})]}),n("div",{className:"card",children:[e("div",{className:"card-header flex justify-between items-center",children:e("h1",{className:"header-title",children:"Negotiation"})}),e("div",{className:"card-body",children:e(h,{dataSource:B,columns:ia,loading:y,pagination:!1,rowKey:"id",scroll:{x:"max-content"},tableLayout:"auto"})})]})]})}),e(_,{isTrue:V(a==null?void 0:a.status,["-1","4"]),children:n("div",{children:[e(Y,{order:a,printUrl:f}),n("div",{className:"card",children:[e("div",{className:"card-header",children:e("h1",{className:"header-titl",children:"Informasi Pengiriman"})}),n("div",{className:"card-body",children:[e("table",{children:n("tbody",{children:[n("tr",{children:[e("td",{className:"w-32 md:w-56",children:"Order No"}),e("td",{className:"w-4",children:":"}),e("td",{children:a==null?void 0:a.order_number})]}),n("tr",{children:[e("td",{className:"w-32 md:w-56",children:"Tipe Pengiriman"}),e("td",{className:"w-4",children:":"}),e("td",{children:"Normal"})]}),n("tr",{children:[e("td",{className:"w-32 md:w-56",children:"Alamat"}),e("td",{className:"w-4",children:":"}),e("td",{children:a==null?void 0:a.selected_address})]})]})}),e(h,{scroll:{x:"max-content"},tableLayout:"auto",className:"mb-4",dataSource:u,columns:[...F,...G],loading:y,pagination:!1,rowKey:"id",summary:()=>u.length>0?e(L,{children:q.map((t,d)=>e(M,{item:t,disabled:!0},d))}):null}),(a==null?void 0:a.status)>0&&n("div",{children:[e("p",{children:"Produk akan dikirim dengan kurir perusahaan. Silahkan assign nama pic kurir / bagian warehouse dibawah ini :"}),n("div",{children:[e("label",{htmlFor:"",className:"text-bold mb-2",children:"Pic Kurir / Bagian Warehouse"}),e(S,{disabled:(a==null?void 0:a.status)==="4",loading:se,allowClear:!0,className:"w-full mb-2",placeholder:"Select Kurir",onChange:t=>oe(t),value:a==null?void 0:a.courier,children:x&&x.map(t=>e(S.Option,{value:t.id,children:t==null?void 0:t.name},t.id))}),e("small",{children:e("i",{children:"Anda dapat melakukan perubahan saat data belum masuk ke dalam proses assign to warehouse"})})]})]})]})]}),(a==null?void 0:a.status)>0&&e("div",{className:"card",children:n("div",{className:"card-body",children:[e("p",{children:"Notes"}),e(ee,{disabled:(a==null?void 0:a.status)==="4",placeholder:"notes",value:E,onChange:t=>$(t.target.value),onBlur:U})]})}),(a==null?void 0:a.status)==1&&e(_,{isTrue:(l==null?void 0:l.role.role_type)!=="sales"&&((l==null?void 0:l.role.role_type)==="adminsales"||(l==null?void 0:l.role.role_type)==="leadsales"||(l==null?void 0:l.role.role_type)==="superadmin"),children:n("button",{className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 text-center inline-flex items-center ml-2 float-right",onClick:()=>{if(y)return null;ie()},disabled:y,children:[y&&e(ae,{}),"Assign To Warehouse"]})})]})})]})};export{ba as default};
