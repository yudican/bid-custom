import{u as O,r as a,b as d,L as P,j as e,T as _,p as j,a as u,D as B,e as F,f as Y,m as v,h as K,E as R,i as $}from"./app-a358be14.js";import{M as z,B as I}from"./ModalFilterTransaction-2e056543.js";import{N as W}from"./config-10ebfe92.js";const V=()=>{const g=O(),[m,r]=a.useState(!1),[h,p]=a.useState([]),[f,w]=a.useState(0),[k,y]=a.useState(1),[q,C]=a.useState({}),[l,S]=a.useState([]),o=(t="/api/newTransactionAgent",s=10)=>{r(!0),u.post(t,{perpage:s}).then(i=>{const{data:c,total:L,current_page:M}=i.data.data;w(L),y(M);const N=c.map((n,E)=>(console.log(n),{key:n.id,id:E+1,name:n.user.name,id_transaksi:n.id_transaksi,created_at:moment(n.created_at).format("DD-MM-YYYY"),nominal:n.nominal}));p(N),r(!1)})};a.useEffect(()=>{o()},[]);const x=(t,s=10)=>{o(`/api/newTransactionAgent/?page=${t}`,s)},D=({value:t,role:s})=>e(Y,{onClick:({key:i})=>{switch(i){case"detail":g(`/trans-agent/detail/${t}`);break;case"assign":u.post(`/api/trans-agent/assign-warehouse/${t}`,{value:t}).then(c=>{v.success(c.data.status),o()});break}},itemIcon:e(K,{}),items:[{label:"Detail Pesanan",key:"detail",icon:e(R,{})},{label:"Assign To Warehouse",key:"assign",icon:e($,{})}]}),T={title:"Action",key:"id",fixed:"right",width:100,render:t=>e(B.Button,{icon:e(F,{}),overlay:e(D,{value:t.key,role:"list"})})},A=t=>{C(t),loadData("/api/transAgent",10,t)},b={selectedRowKeys:l,onChange:t=>{S(t)}};return d(P,{rightContent:d("div",{className:"flex justify-between items-center",children:[e(z,{handleOk:A}),e(I,{selectedRowKeys:l})]}),title:"Transaction Agent - Pesanan Baru",children:[e(_,{dataSource:h,columns:[...W,T],loading:m,pagination:!1,rowKey:"id",rowSelection:b,scroll:{x:"max-content"},tableLayout:"auto"}),e(j,{defaultCurrent:1,current:k,total:f,className:"mt-4 text-center",onChange:x,pageSizeOptions:["10","20","50","100","200","500"]})]})};export{V as default};
