import{r,j as e,A as w,_ as f,u as K,b as l,L as U,I as J,C as Q,o as X,T as Z,p as ee,a as g,q as D,d as N,at as te,P as ae,D as ne,f as se,h as re,E as oe,t as h}from"./app-b58c37d4.js";import{s as le}from"./config-b81bee97.js";var ce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm376 116c-119.3 0-216 96.7-216 216s96.7 216 216 216 216-96.7 216-216-96.7-216-216-216zm107.5 323.5C750.8 868.2 712.6 884 672 884s-78.8-15.8-107.5-44.5C535.8 810.8 520 772.6 520 732s15.8-78.8 44.5-107.5C593.2 595.8 631.4 580 672 580s78.8 15.8 107.5 44.5C808.2 653.2 824 691.4 824 732s-15.8 78.8-44.5 107.5zM761 656h-44.3c-2.6 0-5 1.2-6.5 3.3l-63.5 87.8-23.1-31.9a7.92 7.92 0 00-6.5-3.3H573c-6.5 0-10.3 7.4-6.5 12.7l73.8 102.1c3.2 4.4 9.7 4.4 12.9 0l114.2-158c3.9-5.3.1-12.7-6.4-12.7zM440 852H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"file-done",theme:"outlined"};const ie=ce;var y=function(i,o){return e(w,{...f(f({},i),{},{ref:o,icon:ie})})};y.displayName="FileDoneOutlined";const ue=r.forwardRef(y);var de={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"};const ge=de;var z=function(i,o){return e(w,{...f(f({},i),{},{ref:o,icon:ge})})};z.displayName="WarningOutlined";const he=r.forwardRef(z),ve=()=>{const c=K(),[i,o]=r.useState(!1),[I,m]=r.useState(!1),[L,R]=r.useState([]),[x,T]=r.useState(0),[p,C]=r.useState(""),[E,b]=r.useState(!1),[P,k]=r.useState(1),[F,fe]=r.useState({}),[$,v]=r.useState(!1),u=(n="/api/order/sales-return",t=10,s={})=>{o(!0),g.post(n,{perpage:t,account_id:D("account_id"),...s}).then(d=>{const{data:B,total:V,current_page:G}=d.data.data;T(V),k(G);const q=B.map(a=>{var O,S;return{id:a.id,uid_retur:a.uid_retur,sr_number:a.sr_number,order_number:a.order_number,contact:((O=a==null?void 0:a.contact_user)==null?void 0:O.name)||"-",sales:((S=a==null?void 0:a.sales_user)==null?void 0:S.name)||"-",status:(a==null?void 0:a.status_return)||"-",created_on:moment(a.created_at).format("DD-MM-YYYY")}});R(q),o(!1)})};r.useEffect(()=>{u()},[]);const H=(n,t=10)=>{u(`/api/order/sales-return/?page=${n}`,t,{search:p,...F})},_=()=>{b(!0),u("/api/order/sales-return",10,{search:p})},M=n=>{m(!0),g.post("/api/order/sales-return/save",{...n,uid_retur:null,account_id:D("account_id")}).then(t=>{const{data:s}=t.data;return m(!1),c("/order/sales-return/form/"+(s==null?void 0:s.uid_retur))}).catch(t=>{t.response.data,m(!1),console.log(t.response,"err.response")})},W=(n,t)=>{g.post(`/api/order/sales-return/${n}`,t).then(s=>{const{message:d}=s.data;u(),h.success(d,{position:h.POSITION.TOP_RIGHT})}).catch(s=>{const{message:d}=s.response.data;h.error(d,{position:h.POSITION.TOP_RIGHT})})},j=()=>{v(!0),g.post("/api/sales-return/export/detail/1").then(n=>{const{data:t}=n.data;window.open(t),v(!1)}).catch(n=>v(!1))},Y=l("div",{className:"flex justify-between items-center",children:[l("button",{className:"ml-3 text-white bg-green-800 hover:bg-green-800 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-4 py-2 text-center inline-flex items-center mr-2",onClick:()=>j(),children:[$?e(N,{}):e(te,{}),e("span",{className:"ml-2",children:"Export"})]}),l("button",{onClick:()=>M(),className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 text-center inline-flex items-center ml-2",children:[I?e(N,{}):e(ae,{}),e("span",{className:"ml-2",children:"Tambah Data"})]})]}),A=[{title:"Action",key:"action",fixed:"right",align:"center",width:100,render:(n,t)=>e(ne.Button,{style:{left:-16},onClick:()=>c(`/order/sales-return/detail/${t.uid_retur}`),overlay:e(se,{onClick:({key:s})=>s==="cancel"?W("cancel",{uid_retur:t.uid_retur,status:5}):c(`/order/sales-return/${s}/${t.uid_retur}`),itemIcon:e(re,{}),items:[{label:"Detail",key:"detail",icon:e(oe,{})},{label:"Ubah",key:"form",icon:e(ue,{})},{label:"Cancel",key:"cancel",icon:e(he,{})}]})})}];return l(U,{title:"Sales Return",rightContent:Y,children:[l("div",{className:"row mb-4",children:[e("div",{className:"col-md-12"}),e("div",{className:"col-md-4 col-sm-6 col-12",children:e(J,{placeholder:"Cari disini",size:"large",className:"rounded",onPressEnter:()=>_(),suffix:E?e(Q,{onClick:()=>{u(),C(null),b(!1)}}):e(X,{onClick:()=>_()}),value:p,onChange:n=>C(n.target.value)})}),e("div",{className:"col-md-8",children:l("strong",{className:"float-right mt-3 text-red-400",children:["Total Data: ",x]})})]}),e(Z,{dataSource:L,columns:[...le,...A],loading:i,pagination:!1,rowKey:"id",scroll:{x:"max-content"},tableLayout:"auto"}),e(ee,{defaultCurrent:1,current:P,total:x,className:"mt-4 text-center",onChange:H,pageSizeOptions:["10","20","50","100","200","500"]})]})};export{ve as default};
