import{bn as $e,r as m,q as F,b as n,j as e,P as te,M as Ge,F as j,I as ke,aq as Ve,c as Z,U as Ce,d as $,g as Ye,t as Se,u as He,a_ as N,D as Oe,bE as R,f as K,a$ as Ie,bq as Je,T as b,aY as ze,v as Ue,S as Qe,s as Xe,n as J,ak as L,L as Pe,x as Ze,bw as Ae,b1 as De,bt as q,ah as B,bF as ea,ai as aa,a as _,m as P,bG as na,w as ta,bH as la,bI as sa,at as da}from"./app-2a35b270.js";import{s as Te,p as X,b as re,a as ia}from"./config-07e5f5df.js";const ca=({refetch:l,detail:i,user:a})=>{const[S]=$e(),[v,o]=m.useState(!1),[h,x]=m.useState({attachment:!1,struct:!1}),[k,G]=m.useState({attachment:null,struct:null}),[T,C]=m.useState({attachment:null,struct:null}),[V,O]=m.useState(!1),g=()=>{O(!0)},le=()=>{O(!1)},se=["account_name","account_bank","total_transfer"],D=({fileList:f,field:p})=>{const E=f.pop();x(I=>({...I,[p]:!0})),setTimeout(()=>{Ye(E.originFileObj,I=>{x(A=>({...A,[p]:!1})),G(A=>({...A,[p]:I}))}),C(I=>({...I,[p]:E.originFileObj}))},1e3)},de=f=>{o(!0);let p=new FormData;T.attachment&&p.append("upload_billing_photo",T.attachment),T.struct&&p.append("upload_transfer_photo",T.struct),p.append("uid_lead",i.uid_lead),p.append("account_name",f.account_name),p.append("account_bank",f.account_bank),p.append("total_transfer",f.total_transfer),p.append("notes",f.notes),p.append("transfer_date",f.transfer_date.format("YYYY-MM-DD")),axios.post("/api/order-lead/billing",p).then(E=>{const{message:I}=E.data;l(),C({attachment:null,struct:null}),G({attachment:null,struct:null}),Se.success(I,{position:Se.POSITION.TOP_RIGHT}),O(!1),o(!1)}).catch(E=>o(!1))},ie=F("role")==="finance";return n("div",{children:[n("button",{onClick:()=>g(),className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 text-center inline-flex items-center",children:[e(te,{}),e("span",{className:"ml-2",children:"Tambah Data"})]}),e(Ge,{title:"Informasi Penagihan",open:V,onOk:()=>{S.submit()},cancelText:"Cancel",onCancel:le,okText:"Simpan",children:e(j,{form:S,name:"basic",layout:"vertical",initialValues:{user_approval:a.name},onFinish:de,autoComplete:"off",children:n("div",{className:"row",children:[n("div",{className:"col-md-12",children:[ie&&e(j.Item,{label:"USER APPROVAL",name:"user_approval",children:e(ke,{disabled:!0})}),se.map((f,p)=>e(j.Item,{label:f.replace("_"," ").toUpperCase(),name:f,rules:[{required:!0,message:"Field Tidak Boleh Kosong!"}],children:e(ke,{})},p)),e(j.Item,{label:"Tanggal Transfer",name:"transfer_date",rules:[{required:!0,message:"Field Tidak Boleh Kosong!"}],children:e(Ve,{className:"w-full"})})]}),e("div",{className:"col-md-12",children:e(j.Item,{label:"Notes",name:"notes",rules:[{required:!1,message:"Please input notes!"}],children:e(Z,{})})}),e("div",{className:"col-md-6",children:e(j.Item,{label:"Billing Photo",name:"upload_billing_photo",rules:[{required:!1,message:"Please input Photo!"}],children:e(Ce,{name:"attachment",listType:"picture-card",className:"avatar-uploader w-100",showUploadList:!1,multiple:!1,beforeUpload:()=>!1,onChange:f=>D({...f,field:"attachment"}),children:k.attachment?h.attachment?e($,{}):e("img",{src:k.attachment,alt:"avatar",style:{height:104}}):n("div",{style:{width:"100%"},children:[h.attachment?e($,{}):e(te,{}),e("div",{style:{marginTop:8,width:"100%"},children:"Upload"})]})})})}),e("div",{className:"col-md-6",children:e(j.Item,{label:"Transfer Photo",name:"upload_transfer_photo",rules:[{required:!1,message:"Please input Photo!"}],children:e(Ce,{name:"struct",listType:"picture-card",className:"avatar-uploader w-100",showUploadList:!1,multiple:!1,beforeUpload:()=>!1,onChange:f=>D({...f,field:"struct"}),children:k.struct?h.struct?e($,{}):e("img",{src:k.struct,alt:"avatar",style:{height:104}}):n("div",{className:"w-100",children:[h.struct?e($,{}):e(te,{}),e("div",{style:{marginTop:8,width:"100%"},children:"Upload"})]})})})})]})})})]})},ne=({order:l=null,printUrl:i})=>{var a,S,v,o,h,x,k;return He(),n("div",{className:"card",children:[n("div",{className:"card-header flex items-center justify-between",children:[e("h1",{className:"text-lg text-bold ",children:l==null?void 0:l.title}),e(N,{isTrue:(l==null?void 0:l.status)!=="4",children:e("div",{children:e(Oe.Button,{style:{borderRadius:10},icon:e(R,{}),overlay:n(K,{children:[(l==null?void 0:l.status)!=1&&n(K.Item,{className:"flex justify-between items-center",children:[e(R,{})," ",e("a",{href:i==null?void 0:i.si,target:"_blank",children:e("span",{children:"Print SI"})})]}),n(K.Item,{className:"flex justify-between items-center",children:[e(R,{})," ",e("a",{href:i==null?void 0:i.so,target:"_blank",children:e("span",{children:"Print SO"})})]}),n(K.Item,{className:"flex justify-between items-center",children:[e(R,{})," ",e("a",{href:i==null?void 0:i.sj,target:"_blank",children:e("span",{children:"Print SJ"})})]})]})})})})]}),n("div",{className:"card-body row",children:[e("div",{className:"col-md-6",children:e("table",{className:"w-100",style:{width:"100%"},children:n("tbody",{children:[n("tr",{children:[e("td",{style:{width:"50%"},className:"py-2",children:e("strong",{children:"Contact"})}),n("td",{children:[": ",((a=l==null?void 0:l.contact_user)==null?void 0:a.name)||"-"]})]}),n("tr",{children:[e("td",{style:{width:"50%"},className:"py-2",children:e("strong",{children:"Company"})}),n("td",{children:[": ",Ie((v=(S=l==null?void 0:l.contact_user)==null?void 0:S.company)==null?void 0:v.name)||"-"]})]}),n("tr",{children:[e("td",{style:{width:"50%"},className:"py-2",children:e("strong",{children:"Customer Need"})}),n("td",{children:[": ",(l==null?void 0:l.customer_need)||"-"]})]}),n("tr",{children:[e("td",{style:{width:"50%"},className:"py-2",children:e("strong",{children:"PIC Sales"})}),n("td",{children:[": ",((o=l==null?void 0:l.sales_user)==null?void 0:o.name)||"-"]})]}),n("tr",{children:[e("td",{style:{width:"50%"},className:"py-2",children:e("strong",{children:"Created On"})}),n("td",{children:[": ",Je(l==null?void 0:l.created_at)||"-"]})]}),n("tr",{children:[e("td",{style:{width:"50%"},className:"py-2",children:e("strong",{children:"Created By"})}),n("td",{children:[": ",((h=l==null?void 0:l.create_user)==null?void 0:h.name)||"-"]})]})]})})}),e("div",{className:"col-md-6",children:e("table",{className:"w-100",style:{width:"100%"},children:n("tbody",{children:[n("tr",{children:[e("td",{style:{width:"50%"},className:"py-2",children:e("strong",{children:"PIC Warehouse"})}),n("td",{children:[": ",((x=l==null?void 0:l.courier_user)==null?void 0:x.name)||"-"]})]}),n("tr",{children:[e("td",{style:{width:"50%"},className:"py-2",children:e("strong",{children:"Warehouse"})}),n("td",{children:[": ",Ie(l==null?void 0:l.warehouse_name)||"-"]})]}),n("tr",{children:[e("td",{style:{width:"50%"},className:"py-2",children:e("strong",{children:"Order Number"})}),n("td",{children:[": ",(l==null?void 0:l.order_number)||"-"]})]}),n("tr",{children:[e("td",{style:{width:"50%"},className:"py-2",children:e("strong",{children:"Invoice Number"})}),n("td",{children:[": ",(l==null?void 0:l.invoice_number)||"-"]})]}),n("tr",{children:[e("td",{style:{width:"50%"},className:"py-2",children:e("strong",{children:"Payment Term"})}),n("td",{children:[": ",((k=l==null?void 0:l.payment_term)==null?void 0:k.name)||"-"]})]}),n("tr",{children:[e("td",{style:{width:"50%"},className:"py-2",children:e("strong",{children:"Due Date"})}),n("td",{children:[": ",(l==null?void 0:l.due_date)||"-"]})]})]})})})]})]})},ra=({dataSource:l,handleChangeCell:i,handleClickCell:a})=>{const v=[{title:"Contact",dataIndex:"contact",key:"contact"},{title:"Before 7 Days",dataIndex:"before_7_day",key:"before_7_day"},{title:"Before 3 Days",dataIndex:"before_3_day",key:"before_3_day"},{title:"Before 1 Days",dataIndex:"before_1_day",key:"before_1_day"},{title:"After 7 Days",dataIndex:"after_7_day",key:"after_7_day"},{title:"#",dataIndex:"action",key:"action"}].map(o=>({...o,onCell:h=>({record:h,dataIndex:o.dataIndex,handleChange:x=>i(x),handleClick:x=>a(x)})}));return e("div",{className:"card",children:n("div",{className:"card-body",children:[e("div",{className:"card-header",children:e("h1",{className:"text-lg text-bold",children:"Set Reminder"})}),e("div",{className:"row",children:e("div",{className:"col-md-12",children:e(b,{components:{body:{cell:oa}},columns:v,dataSource:l,rowKey:"key",scroll:{x:"max-content"},tableLayout:"auto"})})})]})})},oa=l=>{var T;const i=F("user_data",!0);j.useForm();const{dataIndex:a,handleChange:S,handleClick:v,record:o}=l,[h,x]=m.useState([]),k=()=>{Te(null).then(C=>{const V=C.map(O=>({label:O.nama,value:O.id}));x(V)})};m.useEffect(()=>{k()},[]);const G=async C=>await Te(C).then(V=>V.map(g=>({label:g.nama,value:g.id})));return a==="contact"?e("td",{children:e(ze,{showSearch:!0,placeholder:"Cari Contact",fetchOptions:G,filterOption:!1,className:"w-full mb-2",options:[o.contactUser],defaultOptions:o.contact?[o.contact]:h,value:(T=o==null?void 0:o.contact)==null?void 0:T.value,onChange:C=>S({value:C,dataIndex:a,key:o.key,uid_lead:o.uid_lead,reminder_id:o.reminder_id})})}):a==="action"?o.key>0?e("td",{children:e("button",{onClick:()=>v({key:o.reminder_id,type:"delete"}),className:"text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-4 py-2 text-center inline-flex items-center",children:e(Ue,{})})}):e("td",{children:e("button",{disabled:(i==null?void 0:i.role.role_type)==="sales",onClick:()=>v({key:o.key,type:"plus"}),className:`text-white 
          ${(i==null?void 0:i.role.role_type)==="sales"?"bg-gray-500":"bg-blue-700 hover:bg-blue-800"} 
          focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 text-center inline-flex items-center`,children:e(te,{})})}):e("td",{children:e(Qe,{checked:o[a],onChange:C=>S({value:C,dataIndex:a,key:o.key,uid_lead:o.uid_lead,reminder_id:o.reminder_id})})})},{Step:oe}=Ae,ma=()=>{var xe,ve;j.useForm();const l=Xe(),i=F("user_data",!0),[a,S]=m.useState(null),[v,o]=m.useState([]),[h,x]=m.useState([]),[k,G]=m.useState([]),[T,C]=m.useState([]),[V,O]=m.useState([]),[g,le]=m.useState(null),[se,D]=m.useState([]),[de,ie]=m.useState([]),[f,p]=m.useState(null),[E,I]=m.useState(!1),[A,he]=m.useState([{key:0,contact:null,before_7_day:!1,before_3_day:!1,before_1_day:!1,after_7_day:!1}]),[y,ue]=m.useState(!1),[me,pe]=m.useState(!1),w=(t=!0)=>{ue(t),_.get(`/api/order-lead/${l.uid_lead}`).then(s=>{var Q;const{data:r,print:u}=s.data;if(le(u),S(r),p(r.notes),r.reminders.length>0){const d=r.reminders.map((M,ae)=>({key:ae,reminder_id:M.id,contact:M.contactUser,before_7_day:M.before_7_day>0,before_3_day:M.before_3_day>0,before_1_day:M.before_1_day>0,after_7_day:M.after_7_day>0}));he(d)}const W=(Q=r==null?void 0:r.billings)==null?void 0:Q.map(d=>({id:d.id,account_name:d.account_name,account_bank:d.account_bank,total_transfer:d.total_transfer,transfer_date:d.transfer_date,upload_billing_photo:d.upload_billing_photo_url,upload_transfer_photo:d.upload_transfer_photo_url,status:d.status,notes:d.notes??"-",approved_by_name:d.approved_by_name,approved_at:d.approved_at||"-",payment_number:d.payment_number||"-"})),U=r.product_needs&&r.product_needs.map(d=>{var ae,we;return{id:d.id,product:(ae=d==null?void 0:d.product)==null?void 0:ae.name,price:L((we=d==null?void 0:d.prices)==null?void 0:we.final_price),qty:d==null?void 0:d.qty,subtotal:L(d==null?void 0:d.subtotal),total_price:L(d==null?void 0:d.total),final_price:L(d==null?void 0:d.price_nego),tax_id:d==null?void 0:d.tax_id,discount_id:d==null?void 0:d.discount_id,disabled:r.status>1,disabled_discount:d==null?void 0:d.disabled_discount,disabled_price_nego:d==null?void 0:d.disabled_price_nego}});x(U),G(W),C(r==null?void 0:r.lead_activities),O(r==null?void 0:r.negotiations),ue(!1)})},Le=()=>{pe(!0),_.get("/api/general/warehouse-user").then(t=>{const{data:s}=t.data;o(s),pe(!1)})},fe=()=>{_.get(`/api/order-lead/assign-warehouse/${l.uid_lead}`).then(t=>{w(),P.success("Assign Warehouse Success")}).catch(t=>{P.error("Assign Warehouse Failed")})},je=()=>{_.get("/api/master/taxs").then(t=>{D(t.data.data)})},Be=()=>{_.get("/api/master/discounts/sales-offline").then(t=>{ie(t.data.data)})};m.useEffect(()=>{w(),Le(),je(),Be()},[]);const be=(t,s)=>{const r=s>1?"Reject":"Approve";_.post("/api/order-lead/billing/verify",{status:s,...t}).then(u=>{w(),P.success(r+" Billing Success")}).catch(u=>{P.error(r+" Billing Failed")})},Fe=({value:t,dataIndex:s,key:r,reminder_id:u})=>{const W=[...A];W[r][s]=t,t!=null&&t.value&&(W[r].contact={label:t.label,value:t.value},t=t.value),he(W),_.post("/api/order-lead/reminder/update",{field:s,value:t,reminder_id:u,uid_lead:l.uid_lead}).then(U=>{}).catch(U=>{})},ge=()=>{_.post("/api/order-lead/reminder/save",{uid_lead:l.uid_lead}).then(t=>{w()}).catch(t=>{})},Re=({key:t,type:s})=>{s==="plus"?(ge(),A&&A.length===1&&A.find(u=>!u.reminder_id)&&ge()):s==="delete"&&_.get(`/api/order-lead/reminder/delete/${t}`).then(r=>{console.log(r,"delete"),w()}).catch(r=>{console.log(r,"delete")})},ye=t=>{(a==null?void 0:a.courier)!==t&&_.post("/api/order-lead/change-courier",{courier:t,uid_lead:a.uid_lead}).then(s=>{P.success("Berhasil mengubah kurir"),w()}).catch(s=>{P.error("Gagal mengubah kurir")})},Ke=()=>{_.get(`/api/order-lead/closed/${a.uid_lead}`).then(t=>{w(),P.success("Order Lead berhasil di tutup")})},ce=()=>{_.post("/api/general/order/update-notes",{uid_lead:a.uid_lead,notes:f,type:"lead"}).then(t=>{P.success("Notes Berhasil Disimpan")})},_e=({dataIndex:t,value:s,id:r,index:u})=>{_.post("/api/general/update-product-need",{value:s,field:t,uid_lead:l.uid_lead,item_id:r}).then(W=>{const U=W.data,Q=[...h];Q[u][t]=s,x(Q),P.success(U.message),w(!1)})},Ee=t=>{_.post("/api/order-lead/shipping/save",t).then(s=>{P.success("Resi Berhasil Disimpan"),w()}).catch(s=>{P.error("Resi Gagal Disimpan")})},z=[{title:"Tax",dataIndex:"tax",key:"tax",render:(t,s,r)=>e(B,{disabled:s.disabled,placeholder:"Select Tax",value:s.tax_id,onChange:u=>_e({value:u,dataIndex:"tax_id",id:s.id,index:r}),children:se.map(u=>e(B.Option,{value:u.id,children:u.tax_code},u.id))})},{title:"Discount",dataIndex:"discount",key:"discount",render:(t,s,r)=>e(B,{disabled:s.disabled||s.disabled_discount,placeholder:"Select Discount",value:s.discount_id,onChange:u=>_e({value:u,dataIndex:"discount_id",id:s.id,index:r}),children:de.map(u=>e(B.Option,{value:u.id,children:u.title},u.id))})},{title:"Subtotal",dataIndex:"subtotal",key:"subtotal"},{title:"Total Price",dataIndex:"total_price",key:"total_price"}],We=!J(F("role"),["adminsales","leadsales","leadcs","warehouse"]),Me=[{title:"Action",dataIndex:"action",key:"action",render:(t,s,r)=>s.status==0&&a.amount_billing_approved>0&&a.amount<a.amount_billing_approved?"-":s.status==2?e("div",{className:"flex items-center justify-around",children:e("button",{className:"text-white bg-gray-700 hover:bg-gray-800 focus:ring-4 focus:outline-none focus:ring-gray-300 font-medium rounded-lg text-sm px-4 py-2 text-center inline-flex items-center",title:"Approve",children:"Rejected"})}):s.status==1?e("div",{className:"flex items-center justify-around",children:e("button",{className:"text-white bg-green-700 hover:bg-green-800 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-4 py-2 text-center inline-flex items-center",title:"Approve",children:"Approved"})}):We?n("div",{className:"flex items-center justify-around",children:[e(na,{handleClick:u=>be({id:s.id,...u},2),user:i}),e("button",{onClick:()=>be({id:s.id,deposite:a.amount_deposite,billing_approved:a.amount_billing_approved,amount:a.amount},1),className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 text-center inline-flex items-center",title:"Approve",children:e(ta,{})})]}):null}],Y=[{label:"Sub Total",value:L(parseInt(a==null?void 0:a.subtotal))},{label:"Kode Unik",value:a==null?void 0:a.kode_unik},{label:"Ongkir",value:L(a==null?void 0:a.ongkir)},{label:"Tax Total",value:L(parseInt(a==null?void 0:a.tax_amount))},{label:"Diskon",value:L(parseInt(a==null?void 0:a.discount_amount))},{label:"Total",value:L(parseInt(a==null?void 0:a.amount))}],ee=({item:t,disabled:s=!1})=>n(b.Summary.Row,{children:[e(b.Summary.Cell,{index:0}),e(b.Summary.Cell,{index:1}),e(b.Summary.Cell,{index:2}),e(b.Summary.Cell,{index:3}),e(b.Summary.Cell,{index:4}),e(b.Summary.Cell,{index:5}),e(N,{isTrue:t.label==="Kode Unik",children:e(b.Summary.Cell,{index:6,children:e(la,{item:t,order:a,refetch:w,url:"/api/order-lead/update/kode-unik",disabled:s})})}),e(N,{isTrue:t.label==="Ongkir",children:e(b.Summary.Cell,{index:6,children:e(sa,{disabled:s,initialValues:{ongkir:a.ongkir},refetch:w,url:`/api/order-lead/update/ongkir/${a.uid_lead}`})})}),e(N,{isTrue:!J(t.label,["Kode Unik","Ongkir"]),children:e(b.Summary.Cell,{index:6,children:e("strong",{children:t.label})})}),e(b.Summary.Cell,{index:7,children:t.value})]}),qe=()=>{I(!0),_.post(`/api/order-lead/export/detail/${l.uid_lead}`).then(t=>{const{data:s}=t.data;window.open(s),I(!1)}).catch(t=>I(!1))},Ne=e("div",{className:"flex justify-between items-center",children:n("button",{className:"ml-3 text-white bg-green-800 hover:bg-green-800 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-4 py-2 text-center inline-flex items-center mr-2",onClick:()=>qe(),children:[E?e($,{}):e(da,{}),e("span",{className:"ml-2",children:"Export"})]})}),{address_user:H,order_shipping:c}=a||{};return y?e(Pe,{title:"Detail",rightContent:Ne,href:"/order/order-lead",children:e(Ze,{})}):(console.log(a==null?void 0:a.status),n(Pe,{title:"Detail",rightContent:Ne,href:"/order/order-lead",children:[n(Ae,{size:"small",current:a==null?void 0:a.status,style:{marginBottom:16},children:[e(oe,{title:"New"}),e(oe,{title:"Open"}),e(oe,{status:(a==null?void 0:a.status)==="4"?"error":null,title:(a==null?void 0:a.status)==="4"?"Canceled":"Closed"})]}),e(N,{isTrue:(a==null?void 0:a.status)=="1",children:n("div",{children:[e(ne,{order:a,printUrl:g}),e(De,{title:"Address Information",data:((xe=a==null?void 0:a.contact_user)==null?void 0:xe.address_users)||[],contact:a==null?void 0:a.contact_user,refetch:()=>w()}),n("div",{className:"card",children:[e("div",{className:"card-header",children:e("h1",{className:"header-titl",children:"Informasi Pengiriman"})}),n("div",{className:"card-body",children:[e("table",{className:"mb-4",children:n("tbody",{children:[n("tr",{children:[e("td",{className:"w-32 md:w-56",children:"Order No"}),e("td",{className:"w-4",children:":"}),e("td",{children:a==null?void 0:a.order_number})]}),n("tr",{children:[e("td",{children:"Tipe Pengiriman"}),e("td",{children:":"}),e("td",{children:"Normal"})]}),n("tr",{children:[e("td",{children:"Alamat"}),e("td",{children:":"}),e("td",{children:a==null?void 0:a.selected_address})]})]})}),e(b,{scroll:{x:"max-content"},tableLayout:"auto",className:"mb-4",dataSource:h,columns:[...X,...z],loading:y,pagination:!1,rowKey:"id",summary:()=>h.length>0?e(q,{children:Y.map((t,s)=>e(ee,{item:t},s))}):null}),n(N,{isTrue:(i==null?void 0:i.role.role_type)!=="sales"&&((i==null?void 0:i.role.role_type)==="adminsales"||(i==null?void 0:i.role.role_type)==="leadsales"||(i==null?void 0:i.role.role_type)==="superadmin"),children:[e("p",{children:"Produk akan dikirim dengan kurir perusahaan. Silahkan assign nama pic kurir / bagian warehouse dibawah ini :"}),n("div",{children:[e("label",{htmlFor:"",className:"text-bold mb-2",children:"Pic Kurir / Bagian Warehouses"}),e(B,{loading:me,allowClear:!0,className:"w-full mb-2",placeholder:"Select Kurir",onChange:t=>ye(t),value:a==null?void 0:a.courier,children:v&&v.map(t=>e(B.Option,{value:t.id,children:t==null?void 0:t.name},t.id))}),e("small",{children:e("i",{children:"Anda dapat melakukan perubahan saat data belum masuk ke dalam proses assign to warehouse"})})]})]})]})]}),e(N,{isTrue:J(F("role"),["adminsales","leadsales","superadmin"]),children:e("div",{className:"card",children:n("div",{className:"card-body",children:[e("p",{children:"Notes"}),e(Z,{placeholder:"notes",value:f,onChange:t=>p(t.target.value),onBlur:ce})]})})}),(a==null?void 0:a.status)==1&&e(N,{isTrue:J(F("role"),["adminsales","leadsales","superadmin"]),children:n("button",{className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 text-center inline-flex items-center ml-2 float-right",onClick:()=>{if(y)return null;fe()},disabled:y,children:[y&&e($,{}),"Assign To Warehouse"]})})]})}),e(N,{isTrue:(a==null?void 0:a.status)=="2",children:n("div",{children:[e(ne,{order:a,printUrl:g}),n("div",{className:"card",children:[n("div",{className:"card-header flex justify-between items-center",children:[e("h1",{className:"header-titl",children:"Informasi Pengiriman"}),e(N,{isTrue:(i==null?void 0:i.role.role_type)!=="sales",children:e(ea,{hasInputed:c,onFinish:t=>Ee(t),initialValues:c,fields:{uid_lead:a==null?void 0:a.uid_lead}})})]}),n("div",{className:"card-body",children:[e("table",{children:n("tbody",{children:[n("tr",{children:[e("td",{className:"w-32 md:w-56",children:"Order No"}),e("td",{className:"w-4",children:":"}),e("td",{children:a==null?void 0:a.order_number})]}),n("tr",{children:[e("td",{children:"Tipe Pengiriman"}),e("td",{children:":"}),e("td",{children:"Normal"})]}),n("tr",{children:[e("td",{children:"Alamat"}),e("td",{children:":"}),e("td",{children:(a==null?void 0:a.selected_address)||"-"})]}),c&&n(q,{children:[n("tr",{children:[e("td",{children:"Pengirim"}),e("td",{children:":"}),e("td",{children:c==null?void 0:c.sender_name})]}),n("tr",{children:[e("td",{children:"Telfon Pengirim"}),e("td",{children:":"}),e("td",{children:c==null?void 0:c.sender_phone})]}),n("tr",{children:[e("td",{children:"Nama Ekspedisi"}),e("td",{children:":"}),e("td",{children:c==null?void 0:c.expedition_name})]}),n("tr",{children:[e("td",{children:"Resi"}),e("td",{children:":"}),e("td",{children:c==null?void 0:c.resi})]})]})]})}),e("div",{className:"mt-4",children:e(b,{scroll:{x:"max-content"},tableLayout:"auto",className:"mb-4",dataSource:h,columns:[...X,...z],loading:y,pagination:!1,rowKey:"id",summary:()=>h.length>0?e(q,{children:Y.map((t,s)=>e(ee,{item:t},s))}):null})})]})]}),n("div",{className:"card",children:[n("div",{className:"card-header flex justify-between items-center",children:[e("h1",{className:"header-title",children:"Informasi Penagihan"}),e(N,{isTrue:(i==null?void 0:i.role.role_type)!=="sales",children:e(ca,{detail:a,refetch:w,user:i})})]}),e("div",{className:"card-body",children:e(b,{scroll:{x:"max-content"},tableLayout:"auto",dataSource:k,columns:((ve=i==null?void 0:i.role)==null?void 0:ve.role_type)!=="sales"?[...re,...Me]:[...re],loading:y,pagination:!1,rowKey:"id"})})]}),e(ra,{handleChangeCell:Fe,handleClickCell:Re,dataSource:A}),e("div",{className:"card",children:n("div",{className:"card-body",children:[e("p",{children:"Notes"}),e(Z,{placeholder:"notes",value:f,onChange:t=>p(t.target.value),onBlur:ce})]})}),e(N,{isTrue:J(F("role"),["finance","superadmin"]),children:e("div",{className:"card",children:e("div",{className:"card-body",children:n("div",{className:"flex justify-between items-center",children:[e("p",{style:{width:"60%"},children:e("i",{children:"Pastikan Anda telah mendownload surat jalan dan melakukan pengemasan terlebih dahulu untuk melanjutkan ke proses Pengiriman Product"})}),n("button",{className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 text-center inline-flex items-center",onClick:Ke,children:[e(aa,{}),e("span",{className:"ml-2",children:"Payment Proccess"})]})]})})})})]})}),e(N,{isTrue:(a==null?void 0:a.status)=="3",children:n("div",{children:[e(ne,{order:a,printUrl:g}),n("div",{className:"card",children:[n("div",{className:"card-header flex justify-between items-center",children:[e("h1",{className:"header-title",children:"Lead Activity"}),e("div",{children:e(Oe.Button,{style:{borderRadius:10},icon:e(R,{}),overlay:n(K,{children:[n(K.Item,{className:"flex justify-between items-center",children:[e(R,{})," ",e("a",{href:g==null?void 0:g.si,target:"_blank",children:e("span",{children:"Print SI"})})]}),n(K.Item,{className:"flex justify-between items-center",children:[e(R,{})," ",e("a",{href:g==null?void 0:g.so,target:"_blank",children:e("span",{children:"Print SO"})})]}),n(K.Item,{className:"flex justify-between items-center",children:[e(R,{})," ",e("a",{href:g==null?void 0:g.sj,target:"_blank",children:e("span",{children:"Print SJ"})})]})]})})})]}),e("div",{className:"card-body",children:e(b,{scroll:{x:"max-content"},tableLayout:"auto",dataSource:T,columns:ia,loading:y,pagination:!1,rowKey:"id"})})]}),n("div",{className:"card",children:[e("div",{className:"card-header",children:e("h1",{className:"header-titl",children:"Informasi Pengiriman"})}),n("div",{className:"card-body",children:[e("table",{children:n("tbody",{children:[n("tr",{children:[e("td",{className:"w-32 md:w-56",children:"Order No"}),e("td",{className:"w-4",children:":"}),e("td",{children:a==null?void 0:a.order_number})]}),n("tr",{children:[e("td",{children:"Tipe Pengiriman"}),e("td",{children:":"}),e("td",{children:"Normal"})]}),n("tr",{children:[e("td",{children:"Alamat"}),e("td",{children:":"}),e("td",{children:(H==null?void 0:H.alamat_detail)||"-"})]}),c&&n(q,{children:[n("tr",{children:[e("td",{children:"Pengirim"}),e("td",{children:":"}),e("td",{children:c==null?void 0:c.sender_name})]}),n("tr",{children:[e("td",{children:"Telfon Pengirim"}),e("td",{children:":"}),e("td",{children:c==null?void 0:c.sender_phone})]}),n("tr",{children:[e("td",{children:"Nama Ekspedisi"}),e("td",{children:":"}),e("td",{children:c==null?void 0:c.expedition_name})]}),n("tr",{children:[e("td",{children:"Resi"}),e("td",{children:":"}),e("td",{children:c==null?void 0:c.resi})]})]})]})}),e("div",{className:"mt-4",children:e(b,{scroll:{x:"max-content"},tableLayout:"auto",className:"mb-4",dataSource:h,columns:[...X,...z],loading:y,pagination:!1,rowKey:"id"})})]}),n("div",{className:"card",children:[e("div",{className:"card-header",children:e("h1",{className:"header-titl",children:"Informasi Pengiriman"})}),n("div",{className:"card-body",children:[e("table",{children:n("tbody",{children:[n("tr",{children:[e("td",{className:"w-32 md:w-56",children:"Order No"}),e("td",{className:"w-4",children:":"}),e("td",{children:a==null?void 0:a.order_number})]}),n("tr",{children:[e("td",{children:"Tipe Pengiriman"}),e("td",{children:":"}),e("td",{children:"Normal"})]}),n("tr",{children:[e("td",{children:"Alamat"}),e("td",{children:":"}),e("td",{children:(H==null?void 0:H.alamat_detail)||"-"})]}),c&&n(q,{children:[n("tr",{children:[e("td",{children:"Nama Ekspedisi"}),e("td",{children:":"}),e("td",{children:c==null?void 0:c.expedition_name})]}),n("tr",{children:[e("td",{children:"Resi"}),e("td",{children:":"}),e("td",{children:c==null?void 0:c.resi})]})]})]})}),e("div",{className:"mt-4",children:e(b,{className:"mb-4",dataSource:h,columns:[...X,...z],loading:y,pagination:!1,rowKey:"id",summary:()=>h.length>0?e(q,{children:Y.map((t,s)=>e(ee,{item:t,disabled:!0},s))}):null})})]})]}),n("div",{className:"card",children:[e("div",{className:"card-header",children:e("h1",{className:"header-title",children:"Informasi Penagihan"})}),e("div",{className:"card-body",children:e(b,{dataSource:k,columns:[...re],loading:y,pagination:!1,rowKey:"id"})})]}),e("div",{className:"card",children:n("div",{className:"card-body",children:[e("p",{children:"Notes"}),e(Z,{placeholder:"notes",value:f,readOnly:!0})]})})]})]})}),e(N,{isTrue:(a==null?void 0:a.status)=="4",children:n("div",{children:[e(ne,{order:a,printUrl:g}),n("div",{className:"card",children:[e("div",{className:"card-header",children:e("h1",{className:"header-titl",children:"Informasi Pengiriman"})}),n("div",{className:"card-body",children:[e("table",{className:"mb-4",children:n("tbody",{children:[n("tr",{children:[e("td",{className:"w-32 md:w-56",children:"Order No"}),e("td",{className:"w-4",children:":"}),e("td",{children:a==null?void 0:a.order_number})]}),n("tr",{children:[e("td",{children:"Tipe Pengiriman"}),e("td",{children:":"}),e("td",{children:"Normal"})]}),n("tr",{children:[e("td",{children:"Alamat"}),e("td",{children:":"}),e("td",{children:a==null?void 0:a.selected_address})]})]})}),e(b,{scroll:{x:"max-content"},tableLayout:"auto",className:"mb-4",dataSource:h,columns:[...X,...z],loading:y,pagination:!1,rowKey:"id",summary:()=>(h==null?void 0:h.length)>0?e(q,{children:Y==null?void 0:Y.map((t,s)=>e(ee,{item:t,disabled:!0},s))}):null}),e("p",{children:"Produk akan dikirim dengan kurir perusahaan. Silahkan assign nama pic kurir / bagian warehouse dibawah ini :"}),n("div",{children:[e("label",{htmlFor:"",className:"text-bold mb-2",children:"Pic Kurir / Bagian Warehouses"}),e(B,{disabled:(a==null?void 0:a.status)==="4",loading:me,allowClear:!0,className:"w-full mb-2",placeholder:"Select Kurir",onChange:t=>ye(t),value:a==null?void 0:a.courier,children:v&&v.map(t=>e(B.Option,{value:t.id,children:t==null?void 0:t.name},t.id))}),e("small",{children:e("i",{children:"Anda dapat melakukan perubahan saat data belum masuk ke dalam proses assign to warehouse"})})]})]})]}),e("div",{className:"card",children:n("div",{className:"card-body",children:[e("p",{children:"Notes"}),e(Z,{disabled:(a==null?void 0:a.status)==="4",placeholder:"notes",value:f,onChange:t=>p(t.target.value),onBlur:ce})]})}),(a==null?void 0:a.status)==1&&e(N,{isTrue:J(F("role"),["adminsales","leadsales","superadmin"]),children:n("button",{className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 text-center inline-flex items-center ml-2 float-right",onClick:()=>{if(y)return null;fe()},disabled:y,children:[y&&e($,{}),"Assign To Warehouse"]})})]})})]}))};export{ma as default};
