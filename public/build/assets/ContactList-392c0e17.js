import{r as s,b as l,j as e,ao as A,ap as z,M as $,ah as d,I as x,aq as q,u as K,L as G,C as H,o as J,T as Q,ar as U,p as V,a as O,as as W,ak as _,d as X,at as Z,P as ee}from"./app-2a35b270.js";const{RangePicker:le}=q,te=({handleOk:b})=>{const[S,r]=s.useState(!1),[u,m]=s.useState(!1),[C,F]=s.useState([]),[o,i]=s.useState({roles:null,status:null,createdBy:null}),v=()=>{h(),r(!0)},h=()=>{axios.get("/api/master/role").then(a=>{F(a.data.data)})};s.useEffect(()=>{h()},[]);const N=()=>{r(!1),m(!1),i({roles:null,status:null,createdBy:null})},p=(a,c)=>{if(c==="createdBy")return i({...o,createdBy:a.value});i({...o,[c]:a})};return l("div",{children:[u?l("button",{onClick:()=>v(),className:"text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-4 py-2 text-center inline-flex items-center",children:[e(A,{}),e("span",{className:"ml-2",children:"Show Filter"})]}):l("button",{onClick:()=>v(),className:" bg-white border  text-blue-700 hover:text-blue-700/90 delay-100 ease-in-out focus:ring-4 focus:outline-none focus:ring-blue-300  font-medium rounded-lg  text-sm px-4 py-2 text-center inline-flex items-center ",children:[e(z,{}),e("span",{className:"ml-2",children:"Filter"})]}),l($,{title:"Filter Contact",open:S,onOk:()=>{b(o),m(!0),r(!1)},cancelText:u?"Clear Filter":"Cancel",onCancel:u?()=>{r(!1),m(!1),i({roles:null,status:null,createdBy:null}),b({})}:N,okText:"Apply Filter",children:[l("div",{children:[l("div",{children:[e("label",{htmlFor:"",children:"Role"}),e(d,{mode:"multiple",allowClear:!0,className:"w-full mb-2",placeholder:"Select Role",onChange:a=>p(a,"roles"),children:C.map(a=>e(d.Option,{value:a.id,children:a.role_name},a.id))})]}),l("div",{children:[e("label",{htmlFor:"",children:"Status"}),l(d,{mode:"multiple",allowClear:!0,className:"w-full mb-2",placeholder:"Select Order Status",onChange:a=>p(a,"status"),children:[e(d.Option,{value:1,children:"Active"},1),e(d.Option,{value:0,children:"Non Active"},0),e(d.Option,{value:2,children:"Blacklist"},2)]})]})]}),l("div",{className:"mb-2",children:[e("label",{htmlFor:"",children:"Create Date"}),e(le,{className:"w-full",format:"YYYY-MM-DD",onChange:(a,c)=>p(c,"created_at")})]}),l("div",{className:"row mb-2",children:[l("div",{className:"col-md-6",children:[e("label",{htmlFor:"",children:"Range Deposito"}),e(x,{placeholder:"Min"})]}),l("div",{className:"col-md-6",children:[e("label",{htmlFor:"",children:" "}),e(x,{placeholder:"Max"})]})]}),l("div",{className:"row",children:[l("div",{className:"col-md-6",children:[e("label",{htmlFor:"",children:"Range Stock"}),e(x,{placeholder:"Min"})]}),l("div",{className:"col-md-6",children:[e("label",{htmlFor:"",children:" "}),e(x,{placeholder:"Max"})]})]})]})]})},ne=()=>{const b=K(),[S,r]=s.useState(!1),[u,m]=s.useState([]),[C,F]=s.useState(0),[o,i]=s.useState(""),[v,h]=s.useState(!1),[N,p]=s.useState(1),[y,a]=s.useState({}),[c,w]=s.useState(!1),[D,E]=s.useState([]),f=(n="/api/contact",g=10,Y={page:N})=>{r(!0),O.post(n,{perpage:g,...Y}).then(T=>{const{data:M,total:B,current_page:I}=T.data.data;F(B),p(I);const j=M.map(t=>({key:t.id,name:t.name,telepon:t.telepon,email:t.email,role:t==null?void 0:t.role.role_name,created_by:t==null?void 0:t.created_by_name,created_on:W(t.created_at).format("DD-MM-YYYY"),deposit:_(t==null?void 0:t.deposit),total_debt:_(t==null?void 0:t.amount_detail.total_debt)}));E(M.map(t=>t.role.role_type)),m(j),r(!1)}).catch(()=>r(!1))};s.useEffect(()=>{f()},[]);const L=(n,g=10)=>{f(`/api/contact/?page=${n}`,g,{search:o,page:n,...y})},k=()=>{h(!0),f("/api/contact",10,{search:o})},R=n=>{a(n),f("/api/contact",10,n)},P=()=>{w(!0),O.post("/api/contact/export/").then(n=>{const{data:g}=n.data;window.open(g),w(!1)}).catch(n=>w(!1))};return l(G,{rightContent:l("div",{className:"flex justify-between items-center",children:[e(te,{handleOk:R,roleSelected:D||[]}),l("button",{className:"ml-3 text-white bg-green-800 hover:bg-green-800 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-4 py-2 text-center inline-flex items-center mr-2",onClick:()=>P(),children:[c?e(X,{}):e(Z,{}),e("span",{className:"ml-2",children:"Export"})]}),l("button",{onClick:()=>b("/contact/create"),className:"text-white bg-blueColor hover:bg-blueColor/90 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 text-center inline-flex items-center ml-2",children:[e(ee,{}),e("span",{className:"ml-2",children:"Tambah Data"})]})]}),title:"List Contact",children:[l("div",{className:"row mb-4",children:[e("div",{className:"col-md-12"}),e("div",{className:"col-md-4 col-sm-6 col-12",children:e(x,{placeholder:"Cari disini",size:"large",className:"rounded",onPressEnter:()=>k(),suffix:v?e(H,{onClick:()=>{f(),i(null),h(!1)}}):e(J,{onClick:()=>k()}),value:o,onChange:n=>i(n.target.value)})}),e("div",{className:"col-md-8",children:l("strong",{className:"float-right mt-3 text-red-400",children:["Total Data: ",C]})})]}),e(Q,{dataSource:u,columns:U,loading:S,pagination:!1,rowKey:"id",scroll:{x:"max-content"},tableLayout:"auto"}),e(V,{defaultCurrent:1,current:N,total:C,className:"mt-4 text-center",onChange:L,pageSizeOptions:["10","20","50","100","200","500"]})]})};export{ne as default};
